{"version":3,"sources":["components/TaskList/TaskList.js","components/List/List.js","components/Task/Task.js","services/util.js","services/server.js","components/Frame/Frame.js","services/edit.js","services/display.js","services/keyComms.js","services/saving.js","assets/media/logo.png","components/SignIn/SignIn.js","assets/snd/pop.mp3","assets/snd/timer.mp3","assets/snd/start.mp3","components/StatusBar/StatusBar.js","components/App/App.js","index.js"],"names":["TaskList","this","subtaskObjects","tasksListed","props","subtasks","filter","x","window","data","tasks","util","map","index","push","React","createRef","id","info","title","parent","ref","length","reverse","join","className","Component","List","updateHeights","dropTask","ev","type","edit","draggedTask","listParent","selected","preventSelect","setTimeout","setState","taskDrop","subtaskDrop","stopPropagation","taskList","state","zoomed","target","value","ordered","currentTime","subtasksCurrent","task","thisTime","startDate","sortedList","currentSort","taskData","includes","sort","a","b","splice","flat","selectThis","changeTitle","bind","listInput","charAt","repeats","sortList","dragOver","preventDefault","dataTransfer","dropEffect","dragEnter","onClick","onContextMenu","onDragEnter","onDragLeave","onDrop","onChange","onDragOver","readOnly","deadlines","display","String","startdates","Task","hasRepeats","repeating","Object","keys","settings","repeat","dateRender","concat","endDate","end","padStart","string","toggleRepeat","dayInput","del","days","repeatId","app","current","river","day","findIndex","timeDrag","unit","addEventListener","mouseup","removeEventListener","changeTime","disableSelect","displayOptions","freeze","forceUpdate","pageY","screenY","updateTime","ev2","val","date","infoOrig","orig2","change","Date","getHours","shiftKey","updateRiverDate","Number","isNaN","getMonth","setMonth","getDate","setDate","setHours","setSeconds","setMilliseconds","today","getTime","isComplete","completed","complete","excludes","riverTask","minHeight","notes","collapsed","showHide","editBar","focus","$","hasClass","updateHeight","resizable","style","height","scrollHeight","action","deadlineData","dateString","toDateString","status","popSnd","prevState","important","maybe","removeData","confirm","currentTask","toggleComplete","toggleImportant","toggleMaybe","deleteThis","optionsButton","infoInput","infoArea","headingClass","hasTimes","repeatsOn","startExtra","endExtra","getWeekday","list","getDay","hours","container","onKeyDown","key","hide","preventReturn","onDragStart","width","justifyContent","flexWrap","toggleCollapse","changeValue","onMouseDown","placeholder","marginLeft","show","attr","onMouseUp","spellCheck","flexDirection","marginRight","slice","getFrame","getList","stripR","getSubtasks","object","dateFormat","timeList","Axios","require","uploadSettings","console","log","post","username","encryptedPassword","password","then","result","catch","err","uploadTasks","uploadData","initializeData","initialData","Frame","todayIndex","now","getFullYear","addList","lastDate","frames","addLists","i","changeIndex","set","newIndex","frame","finish","children","scrollIntoView","updatePosition","focused","undefined","scrollPos","Math","floor","frameContainer","scrollLeft","position","abs","shownIndex","shownLists","onScroll","save","saveType","saveObject","server","saveSetting","setting","saveUndo","undoData","JSON","parse","stringify","undo","location","reload","deleteTask","newTask","copiedTask","pasteTask","selectTask","el","force","cutTask","copyTask","mirror","insertIndex","indentTask","unindent","lastSelected","here","taskAbove","theseSubtasks","previousSubtasks","parentSubtasks","moveTask","direction","selectedPlace","subtasksChopped","insertPlace","hideComplete","spliceTask","listEdit","incompleteTasks","addIncomplete","y","tomorrow","alert","checkTimes","getMinutes","find","todayList","taskEntry","Notification","requestPermission","newDate","setMinutes","switchView","updateAllSizes","toggleMode","mode","setTheme","theme","toggleSounds","sounds","focusSet","bank","focusView","processWidth","update","riverLists","bankLists","newTheme","themes","document","documentElement","setProperty","displayTable","playSound","sound","play","innerWidth","css","goToToday","searchDate","text","statusBar","search","goToFirst","zoom","zoomedSetting","keyComms","ctrlKey","activeElement","blur","reset","restore","textarea","append","on","remove","backup","SignIn","useState","setUsername","setPassword","password2","setPassword2","format","setFormat","init","src","imgSource","response","StatusBar","tutorial","myFunc","off","searchString","foundTasks","searches","RegExp","test","idList","buildParents","otherId","listIndex","foundTask","taskId","taskIndex","searchResults","goToSearch","searchBar","options","functions","move","upcoming","deadlineItems","functionsDict","saving","defaultValue","call","disabled","hidden","ListMenu","riverLister","bankLister","goToList","Timer","seconds","audio","Audio","timerSnd","start","startSnd","startTime","ended","endTime","stopwatch","backwards","clearInterval","interval","setInterval","ceil","timeReadout","startTimer","playPause","audioRef","App","contextMenu","SelectMenu","top","left","self","marginTop","TableDisplay","removeDeadline","deadlineList","found","containerId","dates","prevWidth","ReactDOM","render","getElementById","getSelection","empty","removeAllRanges","min","innerHeight","pageX","load"],"mappings":"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","file":"static/js/main.de232c6e.chunk.js","sourcesContent":["import React from 'react';\nimport './TaskList.css';\nimport * as util from '../../services/util';\nimport Task from '../Task/Task';\n\nexport default class TaskList extends React.Component {\n  render() {\n    this.subtaskObjects = [];\n    // subtasks are filtered for deleted tasks\n    const tasksListed = this.props.subtasks.filter(x =>\n      window.data.tasks[util.stripR(x)]).map((x, index) => {\n        this.subtaskObjects.push(React.createRef());\n        const task = (\n          <Task\n            key={x}\n            id={x}\n            info={window.data.tasks[util.stripR(x)].info}\n            title={window.data.tasks[util.stripR(x)].title}\n            subtasks={window.data.tasks[util.stripR(x)].subtasks}\n            parent={this.props.parent}\n            ref={this.subtaskObjects[this.subtaskObjects.length - 1]}\n            index={index}\n          />\n        )\n        return task;\n      })\n    let parent = this.props.parent;\n    let id = [];\n    while (parent) {\n      id.push(parent.props.id);\n      parent = parent.props.parent;\n    }\n    id = id.reverse().join('-');\n    return (\n      <ul className='listContent'>\n        {tasksListed}\n      </ul>\n    )\n  }\n}","import React from 'react';\nimport './List.css';\nimport * as display from '../../services/display';\nimport * as edit from '../../services/edit';\nimport * as util from '../../services/util';\nimport TaskList from '../TaskList/TaskList';\n\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.taskList = React.createRef();\n    this.state = {\n      // filter subtasks here\n      subtasks: props.subtasks,\n      title: props.title,\n      info: {}, zoomed: ''\n    };\n  }\n  changeTitle(ev) {\n    this.setState({ title: ev.target.value });\n  }\n  sortList() {\n    // sort the given list by time\n    let ordered = true;\n    let currentTime = 0;\n    for (let x of this.subtasksCurrent) {\n      const task = window.data.tasks[util.stripR(x)];\n      const thisTime = util.getTime(task.info.startDate);\n      if (\n        task.info.type === 'event' &&\n        thisTime < currentTime\n      ) {\n        ordered = false;\n        break;\n      }\n      currentTime = thisTime;\n    }\n    if (ordered) return;\n    // sort the list\n    let sortedList = [];\n    let currentSort = ['start'];\n    for (let task of this.subtasksCurrent) {\n      const taskData = window.data.tasks[util.stripR(task)];\n      if (taskData.info.type === 'event' && \n        !taskData.info.startDate.includes('--')) {\n        sortedList.push(currentSort);\n        currentSort = [];\n        currentSort.push(task);\n      } else {\n        currentSort.push(task);\n      }\n    }\n    sortedList.push(currentSort); // add last thing\n    sortedList = sortedList.sort((a, b) => {\n      if (a[0] === 'start' || a.length === 0) {\n        a = a.splice(0, 1);\n        return -1;\n      } else if (b[0] === 'start' || b.length === 0) {\n        b = b.splice(0, 1);\n        return 1;\n      } else {\n        return util.getTime(window.data.tasks[util.stripR(a[0])].info.startDate) - \n          util.getTime(window.data.tasks[util.stripR(b[0])].info.startDate)\n      }\n    }).flat();\n    this.subtasksCurrent = sortedList;\n  }\n  updateHeights = () => {\n    return\n    if (!this.taskList.current) return;\n    const objects = this.taskList.current.subtaskObjects.filter(\n      x => x.current.isComplete() !== 'complete'\n    );\n    for (\n      let i = 0; i < objects.length - 1; i++\n    ) {\n      const thisObject = objects[i].current;\n      const nextObject = objects[i + 1].current;\n      let minHeight = 1;\n      if (\n        thisObject.state.info.type === 'event'\n      ) {\n        const endDate = thisObject.state.info.endDate;\n        if (!endDate.includes('--')) {\n          // rounded to 30 minutes\n          minHeight = (endDate[0] * 60 + endDate[1]) / 60;\n        } else if (nextObject.state.info.type === 'event') {\n          // no end date\n          const startDate = nextObject.state.info.startDate;\n          if (!startDate.includes('--')) {\n            const difference = \n              util.getTime(startDate) - util.getTime(thisObject.state.info.startDate);\n            minHeight = difference / 60;\n          }\n        }\n      }\n      thisObject.setState({ minHeight: minHeight });\n    }\n    if (objects.length > 0) {\n      let minHeight = 1;\n      const lastObject = objects[objects.length - 1].current;\n      const endDate = lastObject.state.info.endDate;\n      if (lastObject.state.info.type === 'event' &&\n        !endDate.includes('--')) {\n        // rounded to 30 minutes\n        minHeight = (endDate[0] * 60 + endDate[1]) / 60;\n      }\n      lastObject.setState({ minHeight: minHeight });\n    }\n  }\n  dropTask = (ev, type) => {\n    edit.selectTask(window.draggedTask);\n    const listParent = window.selected.props.parent;\n    edit.cutTask();\n    edit.save(listParent, 'list');\n    window.preventSelect = false;\n    setTimeout(() => {\n      edit.selectTask(this);\n      if (type === 'subtask') {\n        edit.pasteTask('task');\n      } else if (type === 'task') {\n        edit.pasteTask();\n      }\n    }, 100);\n    this.setState({\n      taskDrop: false,\n      subtaskDrop: false,\n    })\n    ev.stopPropagation();\n  }\n  render() {\n    var selectThis = () => {\n      edit.selectTask(this);\n    }\n    this.changeTitle = this.changeTitle.bind(this);\n    this.listInput = React.createRef();\n    this.subtasksCurrent = this.state.subtasks.filter(x =>\n      !(x.charAt(0) === 'R' && !this.props.repeats.includes(x)) &&\n      window.data.tasks[util.stripR(x)]);\n    if (this.props.parent.props.id === 'river') {\n      for (let task of this.props.repeats) {\n        if (!this.subtasksCurrent.includes(task) &&\n          !this.subtasksCurrent.includes(util.stripR(task))) {\n          this.subtasksCurrent.push(task);\n        }\n      }\n    }\n    if (util.getFrame(this).props.id === 'river') {\n      this.sortList();\n      setTimeout(this.updateHeights, 100);\n    }\n    const drop = (ev) => {\n      edit.selectTask(window.draggedTask);\n      const listParent = window.selected.props.parent;\n      edit.cutTask();\n      edit.save(listParent, 'list');\n      window.preventSelect = false;\n      setTimeout(() => {\n        edit.selectTask(this);\n        if (ev.metaKey) {\n          edit.pasteTask('task');\n        } else {\n          edit.pasteTask();\n        }\n      }, 100);\n      ev.stopPropagation();\n    }\n    const dragOver = (ev) => {\n      ev.preventDefault();\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    const dragEnter = (ev) => {\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    const dragLeave = (ev) => {\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    return (\n      <div className={'list ' + this.state.zoomed} onClick={selectThis}\n        onContextMenu={selectThis}\n      >\n        <div className='listInputBackground'\n          onDragEnter={() => {\n            if (window.draggedTask.props.id === this.props.id) return;\n            this.setState({taskDrop: true})\n          }}\n          onDragLeave={() => this.setState({taskDrop: false})}\n          onDrop={(ev) => this.dropTask(ev, 'subtask')}\n        >\n          {this.props.parent.props.id === 'bank' ?\n            <input className='listInput' value={this.state.title}\n              onChange={this.changeTitle} ref={this.listInput}\n              onDragOver={dragOver}\n              onDragEnter={dragEnter}\n              onDragLeave={dragLeave}\n            ></input> :\n            <input readOnly className='listInput listTitle'\n              value={util.dateFormat(this.state.title)} ref={this.listInput}\n              onDragOver={dragOver}\n              onDragEnter={dragEnter}\n            >\n            </input>\n          }\n        </div>\n        <div className='listFrame'>\n          {this.props.parent.props.id === 'river' &&\n            this.props.deadlines &&\n            <ul>\n              {this.props.deadlines.map(x => {\n                try {\n\n                return <li\n                  className='deadline' key={String(x)}\n                  onClick={() => display.searchDate(window.data.tasks[util.stripR(x)].title, 'start')}>\n                  {window.data.tasks[util.stripR(x)].title}</li>;\n                } catch {\n                  return undefined;\n                }\n              })}\n            </ul>}\n          {this.props.parent.props.id === 'river' &&\n            this.props.startdates &&\n            <ul>\n              {this.props.startdates.map(x => {\n                return (<li\n                  className='startdate' key={String(x)}\n                  onClick={() => display.searchDate(window.data.tasks[util.stripR(x)].title,\n                    'start')}>\n                  {window.data.tasks[util.stripR(x)].title}</li>);\n              })}\n            </ul>}\n          <div \n            className={`dropArea ${this.state.taskDrop ? 'droppable' : ''}`}\n            onDragOver={dragOver}\n          ></div>\n          {<TaskList ref={this.taskList} subtasks={this.subtasksCurrent}\n            parent={this} />}\n        </div>\n      </div>\n    )\n  }\n}","import React from 'react';\nimport './Task.css';\nimport $ from 'jquery';\nimport * as display from '../../services/display';\nimport * as edit from '../../services/edit';\nimport * as util from '../../services/util';\nimport TaskList from '../TaskList/TaskList';\nimport List from '../List/List';\n\nexport default class Task extends React.Component {\n  constructor(props) {\n    super();\n    this.state = {\n      info: props.info, title: props.title,\n      subtasks: props.subtasks.filter(x =>\n        window.data.tasks[util.stripR(x)]), parent: props.parent,\n      id: props.id, displayOptions: 'hide', riverTask: false,\n      zoomed: '', minHeight: 1\n    };\n    // TODO\n    if (!this.state.info.startDate) this.state.info.startDate = ['--', '--'];\n    if (!this.state.info.endDate) this.state.info.endDate = ['--', '--'];\n    if (!this.state.info.notes) this.state.info.notes = '';\n    if (!this.state.info.type) {\n      if (props.parent instanceof List &&\n        util.getFrame(props.parent).props.id === 'river') {\n        this.state.info.type = 'event';\n      } else {\n        this.state.info.type = 'date';\n      }\n    };\n    if (!this.state.info.collapsed) this.state.info.collapsed = '';\n    if (!this.state.info.excludes) this.state.info.excludes = [];\n  }\n  displayOptions(ev, showHide) {\n    edit.save(this);\n    if (this.freeze === true) return;\n    if (window.selected !== this) {\n      edit.selectTask(this);\n    }\n    if (this.editBar.current) {\n      this.editBar.current.focus();\n    }\n    if ($(ev.target).hasClass('options') ||\n      $(ev.target).parent().hasClass('options')) {\n      return\n    }\n    if (showHide === 'hide' || this.state.displayOptions === 'show') {\n      this.setState({ displayOptions: 'hide' });\n      if (\n        this.props.parent instanceof List && \n        util.getFrame(this).props.id === 'river'\n      ) {\n        this.props.parent.forceUpdate();\n      }\n    } else if (showHide === 'show' || this.state.displayOptions === 'hide') {\n      this.setState({ displayOptions: 'show' });\n    }\n  }\n  changeTitle(ev) {\n    this.setState({ title: ev.target.value });\n    this.updateHeight();\n  }\n  updateHeight() {\n    if (this.resizable !== false) {\n      this.editBar.current.style.height = '0px';\n      this.editBar.current.style.height =\n        (this.editBar.current.scrollHeight) + \"px\";\n      this.resizable = false;\n    }\n    setTimeout(() => this.resizable = true, 100);\n  }\n  updateRiverDate(type, action) {\n    // remove from startdates/deadlines\n    var date = new Date();\n    var deadlineData;\n    if (type === 'start') {\n      if (this.state.info.startDate.includes('--')) return;\n      deadlineData = window.app.current.state.startdates;\n      date.setMonth(this.state.info.startDate[0] - 1);\n      date.setDate(this.state.info.startDate[1]);\n    } else if (type === 'end') {\n      if (this.state.info.endDate.includes('--')) return;\n      deadlineData = window.app.current.state.deadlines;\n      date.setMonth(this.state.info.endDate[0] - 1);\n      date.setDate(this.state.info.endDate[1]);\n    }\n    var dateString = date.toDateString();\n    if (action === 'add') {\n      if (!deadlineData[dateString]) {\n        deadlineData[dateString] = [this.props.id]\n      }\n      else { deadlineData[dateString].push(this.props.id) }\n    } else if (action === 'remove') {\n      if (!deadlineData[dateString]) return\n      else {\n        deadlineData[dateString].splice(deadlineData[dateString].findIndex(\n          x => x === this.props.id), 1)\n      };\n    }\n    // add to the things\n    if (type === 'start') {\n      window.app.current.setState({ startdates: { ...deadlineData } });\n      edit.saveSetting('startdates', deadlineData);\n    } else if (type === 'end') {\n      window.app.current.setState({ deadlines: { ...deadlineData } });\n      edit.saveSetting('deadlines', deadlineData);\n    }\n  }\n  toggleComplete(change) {\n    let status = this.state.info.complete\n    if (status === 'complete') { \n      status = '';\n      if (this.state.info.type === 'date') {\n        this.updateRiverDate('start', 'add');\n        this.updateRiverDate('end', 'add');\n      }\n    }\n    else {\n      status = 'complete';\n      if (this.state.info.type === 'date') {\n        this.updateRiverDate('start', 'remove');\n        this.updateRiverDate('end', 'remove');\n      }\n      display.playSound(window.app.current.state.popSnd);\n    }\n    // excludes lets it put it in complete\n    const repeats = window.app.current.state.river.current.state.repeats;\n    let repeating = false;\n    let parent = this.props.parent; /// find list it's in\n    while (!parent instanceof List) {\n      parent = parent.props.parent;\n    }\n    const excludes = this.state.info.excludes;\n    for (let x of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']) {\n      if (repeats[x].includes('R' + util.stripR(this.props.id))) {\n        repeating = true;\n        if (!excludes.includes(parent.state.title)) {\n          excludes.push(parent.state.title);\n          break;\n        } else {\n          excludes.splice(excludes\n            .findIndex(x => x === parent.state.title), 1);\n          break;\n        }\n      }\n    }\n    if (repeating === true) {\n      this.setState({ info: { ...this.state.info, excludes: excludes } })\n    } else {\n      this.setState(prevState => ({\n        info: { ...prevState.info, complete: status }\n      }));\n    }\n    if (change !== false) {\n      this.displayOptions('hide');\n    }\n  }\n  toggleImportant(change) {\n    let status = this.state.info.important\n    if (status === 'important') { status = '' }\n    else { status = 'important' }\n    this.setState(prevState => ({\n      info: { ...prevState.info, important: status, maybe: '' }\n    }));\n    if (change !== false) {\n      this.displayOptions('hide');\n    }\n  }\n  toggleMaybe(change) {\n    let status = this.state.info.maybe\n    if (status === 'maybe') { status = '' }\n    else { status = 'maybe' }\n    this.setState(prevState => ({\n      info: { ...prevState.info, maybe: status, important: '' }\n    }));\n    if (change !== false) {\n      this.displayOptions('hide');\n    }\n  }\n  toggleCollapse() {\n    let status = this.state.info.collapsed\n    if (status === 'collapsed') { status = '' }\n    else { status = 'collapsed' }\n    this.setState(prevState => ({\n      info: { ...prevState.info, collapsed: status }\n    }), display.updateAllSizes);\n    this.displayOptions('hide');\n  }\n  hasRepeats = () => {\n    let repeating = false;\n    for (let repeat of Object.keys(window.data.settings.repeats)) {\n      if (window.data.settings.repeats[repeat].includes('R' +\n        util.stripR(this.props.id))) {\n        repeating = true;\n        break;\n      }\n    }\n    return repeating;\n  }\n  deleteThis(removeData) {\n    if (this.hasRepeats()) {\n      const permission = window.confirm(\n        'This will delete all repeats.\\n(Complete task to hide only this one)');\n      if (!permission) { return; }\n    }\n    // TODO: remove deadline, repeat & startdate \n    // [[don't use global variable]]\n    let parent = this.props.parent;\n    while (parent.props.parent) {\n      parent = parent.props.parent;\n    }\n    const subtasks = this.state.parent.state.subtasks;\n    const currentTask = subtasks.findIndex(x => x === this.props.id);\n    subtasks.splice(currentTask, 1);\n    window.selected = this.state.parent;\n    window.preventSelect = true;\n    this.state.parent.setState({ subtasks: subtasks });\n    if (removeData !== false) {\n      this.updateRiverDate('start', 'remove');\n      this.updateRiverDate('end', 'remove');\n      this.toggleRepeat('all', true);\n      delete window.data.tasks[util.stripR(this.props.id)];\n    }\n    setTimeout(() => {\n      edit.saveUndo();\n      window.preventSelect = false\n      edit.save(this.props.parent, 'list');\n    }, 200);\n  }\n  componentDidMount() {\n    this.editBar.current.focus();\n    setTimeout(\n      () => {\n        if (this.editBar.current) this.updateHeight();\n      }, 50\n    )\n    edit.selectTask(this);\n    this.resizable = true;\n  }\n  dateRender = (type) => {\n    var info;\n    if (type === 'start') {\n      info = this.state.info.startDate.concat();\n    } else if (type === 'end') {\n      info = this.state.info.endDate.concat();\n    }\n    if (this.state.info.type === 'event') {\n      if (type === 'start') {\n        let end;\n        if (info[0] >= 12) end = 'p';\n        else end = 'a';\n        if (info[0] > 12) { info[0] -= 12 }\n        return info[0] + ':' + String(info[1]).padStart(2, 0) + end;\n      } else if (type === 'end') {\n        let string = '';\n        if (info[0] !== 0) string += info[0] + 'h';\n        if (info[1] !== 0) string += info[1] + 'm';\n        return string;\n      }\n    } else if (this.state.info.type === 'date') {\n      return info[0] + '-' + info[1];\n    }\n  }\n  toggleRepeat = (dayInput, del) => {\n    var days;\n    if (dayInput === 'all') {\n      days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n    } else {\n      days = [dayInput];\n    }\n    let repeatId;\n    if (this.props.id.charAt(0) === 'R') {\n      repeatId = this.props.id;\n    } else {\n      repeatId = 'R' + this.props.id;\n    }\n    const repeats = { ...window.app.current.state.river.current.state.repeats };\n    for (let day of days) {\n      if (repeats[day].includes(repeatId) || del === true) {\n        if (repeats[day].includes(repeatId)) {\n          repeats[day].splice(repeats[day]\n            .findIndex(x => x === repeatId), 1);\n        }\n      } else {\n        repeats[day].push(repeatId);\n      }\n    }\n    window.app.current.state.river.current.setState({\n      repeats: repeats\n    });\n    edit.saveSetting('repeats', repeats);\n  }\n  timeDrag = (ev, unit, type) => {\n    var mouseup = () => {\n      window.removeEventListener('mousemove', changeTime);\n      window.app.current.setState({ disableSelect: '' });\n      if (unit === 'e' || this.state.info.type === 'event') {\n        this.displayOptions('hide');\n      } else if (unit === 's') {\n        this.setState({ displayOptions: 'show' });\n      } \n      this.freeze = true;\n      setTimeout(() => this.freeze = false, 200);\n      window.removeEventListener('mouseup', mouseup);\n      this.props.parent.forceUpdate();\n    }\n    window.addEventListener('mouseup', mouseup);\n    var change = 10;\n    var pageY = ev.screenY;\n    var updateTime = (ev2, value, unit) => {\n      let val;\n      let date;\n      let infoOrig;\n      let orig2;\n      if (this.state.info.type === 'event') {\n        if (type === 'start') {\n          infoOrig = this.state.info.startDate[1];\n          orig2 = this.state.info.startDate[0];\n        } else if (type === 'end') {\n          infoOrig = this.state.info.endDate[1];\n          orig2 = this.state.info.endDate[0];\n        }\n        if (infoOrig === '--') {\n          infoOrig = 0;\n        }\n        if (orig2 === '--' && type === 'end') {\n          orig2 = 0;\n        } else if (orig2 === '--' && type === 'start') {\n          orig2 = new Date().getHours();\n        }\n        let change;\n        if (ev2.shiftKey) {\n          change = value * 5;\n        } else {\n          change = value * 30;\n        }\n        val = infoOrig + change;\n        if (val >= 60) {\n          val = 0;\n          orig2 += 1;\n        } else if (val < 0) {\n          val = 60 + change;\n          orig2 -= 1;\n        }\n        if (type === 'end') {\n          if (orig2 >= 24 || orig2 < 0) {\n            val = '--';\n            orig2 = '--';\n            window.removeEventListener('mousemove', changeTime);\n          }\n        } else if (type === 'start') {\n          if (orig2 == 3) {\n            val = '--';\n            orig2 = '--';\n            window.removeEventListener('mousemove', changeTime);\n          }\n        }\n        if (type === 'start') {\n          this.setState({\n            info: {\n              ...this.state.info,\n              startDate: [orig2, val]\n            }\n          });\n        } else if (type === 'end') {\n          this.setState({\n            info: {\n              ...this.state.info,\n              endDate: [orig2, val]\n            }\n          });\n        }\n      } else {\n        // dates\n        this.updateRiverDate(type, 'remove');\n        if (unit === 's') {\n          if (type === 'start') {\n            infoOrig = this.state.info.startDate[0];\n            orig2 = this.state.info.startDate[1];\n          } else if (type === 'end') {\n            infoOrig = this.state.info.endDate[0];\n            orig2 = this.state.info.endDate[1];\n          }\n          if (infoOrig === '--' || Number.isNaN(infoOrig)) {\n            infoOrig = new Date().getMonth() + 1;\n          }\n          if (orig2 === '--' || Number.isNaN(orig2)) {\n            orig2 = 1;\n          }\n          val = infoOrig + value;\n          if (val === new Date().getMonth() && value < 0) {\n            val = '--';\n            orig2 = '--';\n          } else {\n            date = new Date();\n            date.setMonth(val - 1);\n            val = date.getMonth() + 1;\n          }\n          if (type === 'start') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                startDate: [val, orig2]\n              }\n            });\n          } else if (type === 'end') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                endDate: [val, orig2]\n              }\n            });\n          }\n        } else if (unit === 'e') {\n          if (type === 'start') {\n            infoOrig = this.state.info.startDate[1];\n            orig2 = this.state.info.startDate[0];\n          } else if (type === 'end') {\n            infoOrig = this.state.info.endDate[1];\n            orig2 = this.state.info.endDate[0];\n          }\n          if (infoOrig === '--' || Number.isNaN(infoOrig)) {\n            infoOrig = new Date().getDate();\n          }\n          if (orig2 === '--' || Number.isNaN(orig2)) {\n            orig2 = new Date().getMonth() + 1;\n          }\n          val = infoOrig + value;\n          date = new Date();\n          date.setMonth(orig2 - 1);\n          date.setDate(val);\n          date.setHours(0); date.setSeconds(0); date.setMilliseconds(0);\n          const today = new Date();\n          today.setDate(today.getDate() - 1);\n          today.setHours(0); today.setSeconds(0); today.setMilliseconds(0);\n          if (date.getTime() === today.getTime() && value < 0) {\n            if (type === 'start') {\n              this.setState({\n                info: {\n                  ...this.state.info,\n                  startDate: ['--', '--']\n                }\n              });\n            } else if (type === 'end') {\n              this.setState({\n                info: {\n                  ...this.state.info,\n                  endDate: ['--', '--']\n                }\n              });\n            }\n            return;\n          }\n          if (type === 'start') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                startDate: [date.getMonth() + 1, date.getDate()]\n              }\n            });\n          } else if (type === 'end') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                endDate: [date.getMonth() + 1, date.getDate()]\n              }\n            });\n          }\n        }\n        if (type === 'start' && !this.state.info.startDate.includes('--')) {\n          this.updateRiverDate(type, 'add');\n        } else if (type === 'end' && !this.state.info.endDate.includes('--')) {\n          this.updateRiverDate(type, 'add');\n        }\n      }\n    }\n    var changeTime = (ev) => {\n      var changeTime = false;\n      if (ev.screenY < pageY - change) {\n        pageY -= change;\n        changeTime = -1;\n      } else if (ev.screenY > pageY + change) {\n        pageY += change;\n        changeTime = 1;\n      }\n      if (changeTime !== false) {\n        updateTime(ev, changeTime, unit);\n      }\n    }\n    window.app.current.setState({ disableSelect: 'disable-select' });\n    window.addEventListener('mousemove', changeTime);\n  }\n  isComplete = () => {\n    let completed = this.state.info.complete;\n    let parent = this.props.parent;\n    // hacking completed for repeats\n    while (!parent instanceof List) {\n      parent = parent.props.parent;\n    }\n    if (this.state.info.excludes.includes(parent.state.title)) {\n      completed = 'complete';\n    }\n    return completed;\n  }\n  dropTask = (ev, type) => {\n    if (window.draggedTask.props.id === this.props.id) return;\n    edit.selectTask(window.draggedTask);\n    const listParent = window.selected.props.parent;\n    edit.cutTask();\n    edit.save(listParent, 'list');\n    window.preventSelect = false;\n    setTimeout(() => {\n      edit.selectTask(this);\n      if (type === 'subtask') {\n        edit.pasteTask('task');\n      } else if (type === 'task') {\n        edit.pasteTask();\n      }\n    }, 100);\n    this.setState({\n      taskDrop: false,\n      subtaskDrop: false,\n    })\n    ev.stopPropagation();\n  }\n  render() {\n    // fuck react\n    this.displayOptions = this.displayOptions.bind(this);\n    this.toggleComplete = this.toggleComplete.bind(this);\n    this.toggleImportant = this.toggleImportant.bind(this);\n    this.toggleMaybe = this.toggleMaybe.bind(this);\n    this.deleteThis = this.deleteThis.bind(this);\n    this.updateHeight = this.updateHeight.bind(this);\n    this.taskList = React.createRef();\n    this.optionsButton = React.createRef();\n    this.editBar = React.createRef();\n    this.infoInput = React.createRef();\n    this.infoArea = React.createRef();\n    const headingClass = this.state.subtasks.length > 0 ?\n      'heading' : '';\n    if (this.editBar.current) {\n      this.editBar.current.style.height = '0px';\n      this.editBar.current.style.height =\n        (this.editBar.current.scrollHeight) + \"px\";\n    }\n    let parent = this;\n    let id = [];\n    while (parent) {\n      id.push(parent.props.id);\n      parent = parent.props.parent;\n    }\n    id = id.reverse().join('-');\n    const hasTimes = this.state.info.type === 'event' &&\n      !this.state.info.startDate.includes('--');\n    let repeatsOn = {};\n    for (let day of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']) {\n      if (window.data.settings.repeats[day].map(x => util.stripR(x)).includes(\n        util.stripR(this.props.id))) {\n        repeatsOn[day] = 'repeatOn';\n      } else {\n        repeatsOn[day] = '';\n      }\n    }\n    let completed = this.isComplete();\n    const amPmFormat = (hours) => {\n      if (hours === '--') return hours;\n      if (hours > 12) return hours - 12;\n      else return hours;\n    }\n    let startExtra;\n    let endExtra;\n    if (this.state.info.type === 'event') {\n      // am/pm\n      if (!this.state.info.startDate.includes('--')) {\n        if (this.state.info.startDate[0] >= 12) startExtra = 'p';\n        else startExtra = 'a';\n      }\n    }\n    else {\n      // date\n      const getWeekday = (list) => {\n        const weekdaysDict = {\n          1: 'M', 2: 'T', 3: 'W', 4: 'R', 5: 'F', 6: 'S', 0: 'U'\n        };\n        const date = new Date();\n        date.setMonth(list[[0]] - 1);\n        date.setDate(list[1]);\n        return weekdaysDict[date.getDay()];\n      }\n      if (!this.state.info.startDate.includes('--')) {\n        startExtra = getWeekday(this.state.info.startDate);\n      }\n      if (!this.state.info.endDate.includes('--')) {\n        endExtra = getWeekday(this.state.info.endDate);\n      }\n    } \n    const openDrag = (ev) => {\n      $(container.current).attr('draggable', 'true');\n    }\n    const closeDrag = (ev) => {\n      $(container.current).attr('draggable', 'false');\n    }\n    const startDrag = (ev) => {\n      // enabling drag & drop: only select target with matching title\n      // const dragId = $(ev.target).attr('dragid');\n      // if (this.props.id === dragId) {\n      // }\n      // only drag it if it's possible to be dragged\n      window.draggedTask = this;\n      ev.stopPropagation();\n    }\n    const dragOver = (ev) => {\n      ev.preventDefault();\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    const container = React.createRef();\n    return (\n      <>\n      <li className={'task ' + this.state.info.important +\n        ' ' + completed +\n        ' ' + this.state.info.maybe +\n        ' ' + headingClass +\n        ' ' + this.state.info.type +\n        ' ' + this.state.info.collapsed +\n        ' ' + this.state.zoomed}\n        onClick={() => { edit.selectTask(this) }} \n        onContextMenu={() => edit.selectTask(this) }\n        style={{minHeight: this.state.minHeight * 1.15 * 30}}\n        onDragOver={dragOver}\n      >\n        <textarea className='infoArea' \n        ref={this.infoArea}\n        onKeyDown={(ev) => {\n          if (ev.key === 'Escape') {\n            $(this.infoArea.current).hide();\n            setTimeout(() => window.preventReturn = false, 100);\n          }\n        }}\n        onChange={() => {\n          this.setState({\n            info: {\n              ...this.state.info,\n              notes: this.infoArea.current.value\n            }\n          })\n        }}\n        value={this.state.info.notes}\n        ></textarea>\n        <div className='taskContent' ref={container}\n          onDragStart={startDrag}>\n          <div className={'options ' + this.state.displayOptions}>\n            <div className='buttonBar' style={{\n              width: '100%',\n              justifyContent: 'space-around',\n              flexWrap: 'nowrap',\n            }}>\n              <div className='buttonBar'>\n                <button\n                  title='toggle complete'\n                  className={'button ' + this.state.info.complete}\n                  onClick={this.toggleComplete}>\n                  √</button>\n                <button\n                  title='toggle important'\n                  className={'button ' + this.state.info.important}\n                  onClick={this.toggleImportant}>\n                  !</button>\n                <button\n                  title='toggle maybe'\n                  className={'button ' + this.state.info.maybe}\n                  onClick={this.toggleMaybe}>\n                  ?</button>\n                <button\n                  title='toggle fold'\n                  className={'button'}\n                  onClick={() => this.toggleCollapse()}>\n                  {'[]'}</button>\n              </div>\n              <div className='buttonBar'>\n                <button className={'button ' + repeatsOn['Mon']}\n                  onClick={() => { this.toggleRepeat('Mon'); }}>M</button>\n                <button className={'button ' + repeatsOn['Tue']}\n                  onClick={() => {\n                    this.toggleRepeat('Tue');\n                  }}>T</button>\n                <button className={'button ' + repeatsOn['Wed']}\n                  onClick={() => {\n                    this.toggleRepeat('Wed');\n                  }}>W</button>\n                <button className={'button ' + repeatsOn['Thu']}\n                  onClick={() => {\n                    this.toggleRepeat('Thu');\n                  }}>R</button>\n                <button className={'button ' + repeatsOn['Fri']}\n                  onClick={() => {\n                    this.toggleRepeat('Fri');\n                  }}>F</button>\n                <button className={'button ' + repeatsOn['Sat']}\n                  onClick={() => {\n                    this.toggleRepeat('Sat');\n                  }}>S</button>\n                <button className={'button ' + repeatsOn['Sun']}\n                  onClick={() => {\n                    this.toggleRepeat('Sun');\n                  }}>U</button>\n              </div>\n            </div>\n              <div className='timeDiv buttonBar' style={{\n                flexWrap: 'nowrap',\n              }}>\n                <button className='button timeSwitch'\n                  onClick={() => {\n                    var changeValue = this.state.info.type === 'event' ?\n                      'date' : 'event';\n                    this.setState({\n                      info: {\n                        ...this.state.info,\n                        type: changeValue,\n                        startDate: ['--', '--'],\n                        endDate: ['--', '--'],\n                      }\n                    })\n                  }}>\n                  {this.state.info.type}\n                </button>\n                <span className='startSpan start'>\n                  <span className='s' onMouseDown={(ev) => {\n                    this.timeDrag(ev, 's', 'start');\n                  }}>{\n                    this.state.info.type === 'event' ?\n                      amPmFormat(this.state.info.startDate[0]) :\n                      this.state.info.startDate[0]\n                  }</span>\n                  <span className='m'>{\n                    this.state.info.type === 'event' ? ':' : '/'\n                  }</span>\n                  <span \n                    className='e' \n                    onMouseDown={(ev) => {\n                      this.timeDrag(ev, 'e', 'start');\n                    }}\n                  >\n                    {this.state.info.type === 'event' ?\n                      String(this.state.info.startDate[1]).padStart(2, 0) :\n                      this.state.info.startDate[1]\n                    }\n                  </span>\n                  {startExtra && \n                  <span className='startSpan extraInfo'>\n                    {startExtra}\n                  </span>}\n                </span>\n                <span className='startSpan end'>\n                  <span className='s' onMouseDown={(ev) => {\n                    this.timeDrag(ev, 's', 'end');\n                  }}>{this.state.info.endDate[0]}</span>\n                  <span className='m'>{\n                    this.state.info.type === 'event' ? 'h' : '/'\n                  }</span>\n                  <span className='e' onMouseDown={(ev) => {\n                    this.timeDrag(ev, 'e', 'end');\n                  }}>{this.state.info.endDate[1]}</span>\n                  <span>{this.state.info.type === 'event' ?\n                    'm' : ''}</span>\n                  {endExtra && \n                  <span className='startSpan extraInfo'>\n                    {endExtra}\n                  </span>}\n                </span>\n                <input ref={this.infoInput} className='infoSpan' placeholder='notes'\n                  style={{ marginLeft: '5px' }}\n                  value={this.state.info.notes}\n                  onChange={() => {\n                    this.setState({\n                      info: {\n                        ...this.state.info,\n                        notes: this.infoInput.current.value\n                      }\n                    })\n                  }}></input>\n                <button className='button' onClick={() => {\n                  $(this.infoArea.current).show();\n                  window.preventReturn = true;\n                }} title='expand notes to paragraph'>+</button>\n              </div>\n          </div>\n          {!hasTimes ? \n            <span className='info'\n              onClick={(ev) => this.displayOptions(ev)}\n              ref={this.optionsButton}\n              onMouseDown={openDrag}\n              onMouseUp={closeDrag}>\n            </span> :\n            <span className='startDate'\n              onClick={(ev) => this.displayOptions(ev)}\n              ref={this.optionsButton}\n              onMouseDown={(ev) => {\n                this.timeDrag(ev, 's', 'start')\n              }}>\n              {this.dateRender('start')}\n            </span>}\n          <textarea className='editBar' value={this.state.title}\n            onChange={(ev) => this.changeTitle(ev)} ref={this.editBar}\n            spellCheck='false' onClick={(ev) => this.displayOptions(ev, 'hide')}></textarea>\n          {this.state.info.notes.length === 0 &&\n            <div style={{\n              display: 'flex', flexDirection: 'column',\n              marginRight: '5px'\n            }}>\n              {!hasTimes &&\n                !this.state.info.startDate.includes('--') &&\n                <span className='startDate'>\n                  {this.dateRender('start')}\n                </span>}\n              {!this.state.info.endDate.includes('--') &&\n                <span className='endDate'>\n                  {this.dateRender('end')}\n                </span>}\n            </div>\n          }\n        </div>\n        {this.state.info.notes.length > 0 &&\n        <div className='taskInfo'>\n          {this.state.info.notes.length > 0 &&\n            <span className='notesSpan'>\n              {this.state.info.notes.length > 50 ?\n                this.state.info.notes.slice(0, 50) + '...' :\n                this.state.info.notes}\n            </span>}\n          {!hasTimes &&\n            !this.state.info.startDate.includes('--') &&\n            <span className='startDate'>\n              {this.dateRender('start')}\n            </span>}\n          {!this.state.info.endDate.includes('--') &&\n            <span className='endDate'>\n              {this.dateRender('end')}\n            </span>}\n        </div>}\n        <div \n          className={`dropArea ${this.state.subtaskDrop ? 'droppable' : ''}`}\n          onDragEnter={() => {\n            if (window.draggedTask.props.id === this.props.id) return;\n            this.setState({subtaskDrop: true})\n          }}\n          onDragLeave={() => this.setState({subtaskDrop: false})}\n          onDrop={(ev) => this.dropTask(ev, 'subtask')}\n        ></div>\n        <TaskList \n          ref={this.taskList} \n          subtasks={this.state.subtasks}\n          parent={this} \n        />\n      </li>\n      <div \n        className={`dropArea ${this.state.taskDrop ? 'droppable' : ''}\n          ${completed}`}\n        onDragEnter={() => {\n          if (window.draggedTask.props.id === this.props.id) return;\n          this.setState({taskDrop: true})\n        }}\n        onDragLeave={() => this.setState({taskDrop: false})}\n        onDrop={(ev) => this.dropTask(ev, 'task')}\n        onDragOver={dragOver}\n      ></div>\n      </>\n    )\n  }\n}","import Task from '../components/Task/Task';\n\nexport function getFrame(task) {\n  let parent = task;\n  while (parent.props.parent) {\n    parent = parent.props.parent;\n  }\n  return parent;\n}\n\nexport function getList(task) {\n  let parent = task;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  return parent;\n}\n\nexport function stripR(x) {\n  if (x.charAt(0) === 'R') {\n    return x.slice(1);\n  } else {\n    return x;\n  }\n}\n\nexport function consoleLog(x) {\n  console.log(x);\n}\n\nexport function getSubtasks(object) {\n  if (object.subtasksCurrent) return object.subtasksCurrent;\n  else return object.state.subtasks;\n}\n\nexport function dateFormat(title) {\n  // reformat dateString (Day Mon -- ----) to usable title\n  return title.slice(0, 4) +\n    title.slice(8, 10);\n}\n\nexport function getTime(timeList) {\n  let currentTime = timeList[0] * 60 + timeList[1];\n  if (currentTime <= 180) currentTime += 1440;\n  return currentTime;\n}","import initialData from '../assets/json/initialData.json';\nconst Axios = require('axios');\n\nexport function uploadSettings() {\n  // upload settings to mySQL\n  console.log('uploading data...');\n  Axios.post('/server/uploadsettings', {\n    username: window.username,\n    encryptedPassword: window.password,\n    data: window.data.settings,\n  }).then((result) => {\n    console.log(result.data);\n  }).catch((err) => {\n    console.log(err);\n  });\n}\n\nexport function uploadTasks() {\n  // upload all tasks\n  console.log('uploading tasks...', window.password, window.username, window.data.tasks);\n  Axios.post('/server/uploadtasks', {\n    username: window.username,\n    encryptedPassword: window.password,\n    data: window.data.tasks,\n  }).then((result) => {\n    console.log(result.data);\n  }).catch((err) => {\n    console.log(err);\n  });\n}\n\nexport function uploadData() {\n  // upload data to mySQL\n  uploadSettings();\n  uploadTasks();\n}\n\nexport function initializeData() {\n  // upload a clean copy of the data to the server\n  window.data = initialData;\n  // fix the date view to include today's date instead of the initial one\n  window.data.tasks['1'].title = new Date().toDateString();\n  // upload to thing\n  uploadData();\n}\n\nexport function testLargeData() {\n  Axios.post('/server/largeposttest', {\n    username: window.username,\n    encryptedPassword: window.password,\n    data: window.data.tasks,\n  }).then((result) => {\n    console.log(result.data);\n  }).catch((err) => {\n    console.log(err);\n  });\n}","import React from 'react';\nimport './Frame.css';\nimport * as display from '../../services/display';\nimport * as util from '../../services/util';\nimport List from '../List/List';\nimport $ from 'jquery';\n\nexport default class Frame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subtasks: props.subtasks, info: props.info,\n      width: display.processWidth(props.info.focused),\n      zoomed: '',\n    };\n    if (props.id === 'river') {\n      this.state.repeats = window.data.settings.repeats;\n      this.state.shownIndex = this.todayIndex();\n    } else if (props.id === 'bank') {\n      this.state.shownIndex = 0;\n    }\n  }\n\n  // find index of today in shownLists\n  todayIndex = () => {\n    const today = new Date();\n    return this.state.subtasks.findIndex(x => {\n      const now = new Date(window.data.tasks[x].title);\n      return now.getDate() === today.getDate() &&\n        now.getMonth() === today.getMonth() &&\n        now.getFullYear() === today.getFullYear()\n    })\n  }\n\n  // create a new list\n  addList = (id) => {\n    // add a new list\n    var title;\n    if (this.props.id === 'river') {\n      const lastDate = new Date(\n        window.data.tasks[this.state.subtasks[this.state.subtasks.length - 1]].title);\n      lastDate.setDate(lastDate.getDate() + 1);\n      title = lastDate.toDateString();\n    } else {\n      title = '';\n    }\n\n    const subtasks = this.state.subtasks;\n    if (!id) id = String(new Date().getTime());\n    else id = String(id);\n    window.data.tasks[id] = {\n      title: title, subtasks: [], info: {}\n    }\n    subtasks.push(id);\n    this.setState({subtasks: subtasks});\n    setTimeout(() => {\n      this.frames[this.frames.length - 1].current.listInput.current.focus();\n    }, 100);\n  }\n\n  addLists = () => {\n    if (this.props.id === 'river') {\n      const id = new Date().getTime();\n      for (let i = 0; i < 7; i ++) {\n        this.addList(String(id + i));\n      }\n    } else {\n      this.addList();\n    }\n  }\n\n  changeIndex = async (val, set) => {\n    var newIndex;\n    if (set === true) {\n      newIndex = val;\n    } else {\n      newIndex = this.state.info.index + val;\n    }\n    if (!this.frame) return;\n\n    const finish = () => {\n      const children = $(this.frame.current).children();\n      if (children[newIndex]) {\n        children[newIndex].scrollIntoView();\n      }\n    }\n\n    this.setState({\n      info: {...this.state.info, index: newIndex}\n    }, finish);\n  }\n\n  updatePosition = () => {\n    if (this.state.focused === 'focused') return;\n    if (this.props.id !== 'river') return;\n    if (this.scrollPos === undefined) this.scrollPos = \n      Math.floor($(this.frameContainer.current).scrollLeft() / 300) * 300;\n    let position = $(this.frameContainer.current).scrollLeft();\n    if (position < 0) position = 0;\n    if (Math.abs(position - this.scrollPos) > 300) {\n      this.scrollPos = Math.floor(position / 300) * 300;\n      // this.setState({ index: this.state.shownIndex + \n      //   Math.floor(scrollPos / 300) });\n      this.setState({ info: \n        {\n          ...this.state.info, \n          index: this.state.shownIndex + Math.floor(this.scrollPos / 300)\n        }\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.updatePosition();\n  }\n\n  render() {\n    var resizeCheck = () => {\n      if (this.state.width !== display.processWidth(this.state.info.focused)) {\n        this.setState({ width: display.processWidth(this.state.info.focused) });\n      }\n    }\n    let endIndex = this.state.info.index + this.state.width;\n    this.frames = [];\n    window.addEventListener('resize', resizeCheck);\n    const shownLists = this.state.subtasks.slice(\n      this.state.shownIndex\n    );\n    this.frame = React.createRef();\n    this.frameContainer = React.createRef();\n    return (\n      <div className={`frameContainer \n        ${this.state.info.focused} ${this.state.zoomed} ${this.props.id}`}\n        onScroll={this.updatePosition} ref={this.frameContainer}>\n        {this.props.id === 'river' &&\n        this.state.info.focused !== 'focused' &&\n        <div className='monthYear'>\n          <span>{\n            window.data.tasks[this.state.subtasks[this.state.info.index]]\n              .title.slice(4, 8)}</span>\n          <span>{\n            window.data.tasks[this.state.subtasks[this.state.info.index]]\n              .title.slice(11)}</span>\n        </div>}\n        <div id={this.props.id}\n          className={'frame'} ref={this.frame}>\n          {shownLists.map(x => {\n            this.frames.push(React.createRef());\n            const task = window.data.tasks[x];\n            if (this.props.id === 'river') {\n              // render state correctly in original lists\n              return (\n                <List key={x} id={x} title={task.title}\n                  subtasks={task.subtasks} parent={this}\n                  deadlines={this.props.deadlines[task.title]}\n                  startdates={this.props.startdates[task.title]}\n                  repeats={this.state.repeats[util.dateFormat(task.title)\n                    .slice(0, 3)]}\n                  ref={this.frames[this.frames.length - 1]} />\n              )\n            } else {\n              return (\n                <List key={x} id={x} title={task.title}\n                  subtasks={task.subtasks} parent={this}\n                  ref={this.frames[this.frames.length - 1]} />\n              )\n            }\n          })}\n          <button className='changeButton' title='add list or date'\n            onClick={() => this.addLists()}>+</button>\n        </div>\n      </div>\n    );\n  }\n}","import * as display from './display';\nimport * as util from './util';\nimport * as server from './server';\nimport Task from '../components/Task/Task';\nimport List from '../components/List/List';\nimport TaskList from '../components/TaskList/TaskList';\nimport Frame from '../components/Frame/Frame';\n\n// TODO: move to saving or somewhere else\n\nexport function save(task, saveType) {\n  // save the new window.data\n  var saveObject;\n  if (saveType === 'list') {\n    saveObject = task.props.parent;\n  } else {\n    saveObject = task;\n  }\n  var subtasks;\n  if (saveObject.subtasksCurrent) subtasks = saveObject.subtasksCurrent;\n  else subtasks = saveObject.state.subtasks;\n  try {\n    window.data.tasks[util.stripR(saveObject.props.id)] = {\n      title: saveObject.state.title,\n      info: saveObject.state.info, subtasks: subtasks\n    };\n  } catch (err) {\n    return;\n  }\n  server.uploadTasks();\n}\n\nexport function saveSetting(setting, value) {\n  window.data.settings[setting] = value;\n  server.uploadSettings();\n}\n\nexport function saveUndo() {\n  window.undoData = JSON.parse(JSON.stringify(window.data));\n}\n\nexport function undo() {\n  window.data = window.undoData;\n  server.uploadData();\n  setTimeout(() => window.location.reload(), 500);\n}\n\n// main funcs\n\nexport function deleteTask() {\n  if (window.selected && window.selected instanceof Task) {\n    saveUndo();\n    window.selected.deleteThis();\n  }\n}\n\nexport function newTask(type) {\n  // create new task after window.selected\n  if (!window.selected || window.preventReturn) return;\n\n  const today = new Date();\n  const now = today.getTime();\n  const newTask = String(now);\n  window.data.tasks[newTask] = {\n    info: { complete: '', startDate: '', endDate: '' },\n    title: '',\n    subtasks: [],\n  };\n  window.copiedTask = newTask;\n  pasteTask(type);\n}\n\nexport function selectTask(el, force) {\n  // make this task window.selected\n  if (window.preventSelect) return\n  if (el instanceof TaskList) {\n    return\n  }\n  window.preventSelect = true;\n  setTimeout(function () { window.preventSelect = false }, 100);\n  if (window.selected) {\n    save(window.selected, 'task');\n  }\n  if (window.selected === el && !force) {\n    return;\n  }\n  if (window.selected instanceof Task && window.selected !== el) {\n    window.selected.displayOptions({ target: undefined }, 'hide');\n  }\n  window.selected = el;\n  if (el instanceof Task) {\n    el.editBar.current.focus();\n  } else if (el instanceof List) {\n    el.listInput.current.focus();\n  }\n}\n\nexport function cutTask() {\n  if (!window.selected || window.selected instanceof List) return;\n  copyTask();\n  window.selected.deleteThis(false);\n  saveUndo();\n}\n\nexport function copyTask(mirror) {\n  if (!window.selected || window.selected instanceof List) return;\n  save(window.selected);\n  if (mirror) {\n    window.copiedTask = window.selected.props.id;\n  } else {\n    // only copy window.data\n    const today = new Date();\n    const now = today.getTime();\n    const newTask = String(now);\n    window.data.tasks[newTask] = { ...window.data.tasks[util.stripR(window.selected.props.id)] };\n    window.copiedTask = newTask;\n  }\n}\n\nexport function pasteTask(type) {\n  if (!window.selected || !window.copiedTask) return;\n  saveUndo();\n  if (window.selected instanceof List || type === 'task') {\n    const subtasks = window.selected.state.subtasks;\n    subtasks.splice(0, 0, window.copiedTask);\n    window.selected.setState({ subtasks: subtasks });\n    save(window.selected, 'task');\n  } else if (window.selected instanceof Task || type === 'list') {\n    const subtasks = window.selected.state.parent.state.subtasks;\n    const insertIndex = subtasks.findIndex(x => x === window.selected.props.id) + 1;\n    subtasks.splice(insertIndex, 0, window.copiedTask);\n    window.selected.state.parent.setState({ subtasks: subtasks });\n    save(window.selected, 'list');\n  }\n}\n\nexport function indentTask(unindent) {\n  // umm fix sometime\n  if (!window.selected) return;\n  const lastSelected = window.selected;\n  save(window.selected);\n  const subtasks =\n    window.selected.props.parent.taskList.current.subtaskObjects;\n  const here = subtasks\n    .findIndex(x => \n    util.stripR(x.current.props.id) === util.stripR(window.selected.props.id));\n    if (unindent !== true) {\n    if (here === 0) return;\n    const taskAbove = subtasks[here - 1].current;\n    const theseSubtasks = util.getSubtasks(taskAbove);\n    theseSubtasks.push(window.selected.props.id);\n    const previousSubtasks = util.getSubtasks(window.selected.props.parent);\n    previousSubtasks.splice(here, 1);\n        taskAbove.setState( { subtasks: theseSubtasks });\n        lastSelected.props.parent.setState({ subtasks: previousSubtasks });\n        save(taskAbove);\n        save(lastSelected.props.parent);\n      } else {\n    if (window.selected.props.parent.props.parent instanceof Frame) return;\n    const subtasks = window.selected.props.parent.props.parent\n      .taskList.current.subtaskObjects;\n    const here = subtasks.findIndex(\n      x => x.current.props.id === window.selected.props.parent.props.id);\n    const theseSubtasks = window.selected.props.parent.props.parent.state.subtasks;\n    theseSubtasks.splice(here + 1, 0, window.selected.props.id);\n        window.selected.props.parent.props.parent.setState({ subtasks: theseSubtasks });\n    save(window.selected.props.parent.props.parent);\n    const parentSubtasks = util.getSubtasks(lastSelected.props.parent);\n    parentSubtasks.splice(parentSubtasks.findIndex(x => \n      x === lastSelected.props.id), 1);\n    lastSelected.props.parent.setState({ subtasks: parentSubtasks });\n    save(lastSelected.props.parent);\n  }\n}\n\nexport function moveTask(direction) {\n  if (!window.selected) return;\n  var subtasks;\n  if (window.selected.props.parent.subtasksCurrent) {\n    subtasks = window.selected.props.parent.subtasksCurrent.concat();\n  } else {\n    subtasks = window.selected.props.parent.state.subtasks;\n  }\n  let selectedPlace =\n    subtasks.findIndex(x => x === window.selected.props.id);\n  if (selectedPlace === 0 && direction === -1) return;\n  else if (selectedPlace === subtasks.length\n    && direction === 1) return;\n  var subtasksChopped;\n  if (direction === -1) {\n    subtasksChopped = subtasks.slice(0, selectedPlace).reverse();\n  } else {\n    subtasksChopped = subtasks.slice(selectedPlace + 1);\n  }\n  var insertPlace;\n  if (window.data.settings.hideComplete === 'hideComplete') {\n    insertPlace = (subtasksChopped.findIndex(x =>\n      window.data.tasks[util.stripR(x)].info.complete !== 'complete') + 1) * direction;\n  } else {\n    insertPlace = 1 * direction;\n  }\n  const spliceTask = subtasks.splice(selectedPlace, 1)[0];\n  subtasks.splice(selectedPlace + insertPlace, 0, spliceTask);\n  window.selected.props.parent.setState({ subtasks: subtasks });\n  save(window.selected.props.parent, 'task');\n}\n\nexport function listEdit(type) {\n  if (!window.selected) {\n    alert('select a list');\n    return;\n  }\n  if (type === 'migrate' && util.getFrame(window.selected).props.id === 'bank') {\n    alert('select a date');\n    return;\n  }\n  var incompleteTasks = [];\n  var subtasksCurrent = util.getList(window.selected).subtasksCurrent;\n  function addIncomplete(task) {\n    for (let x of task.taskList.current.subtaskObjects) {\n      addIncomplete(x.current);\n      if (x.current.state.info.complete !== 'complete') {\n        if (type === 'clear') {\n          x.current.toggleComplete();\n          x.current.displayOptions({target: undefined}, 'hide');\n          save(x.current);\n        } else if (type === 'migrate' && \n          x.current.props.id.charAt(0) !== 'R') {\n          incompleteTasks.push(x.current.props.id);\n          subtasksCurrent.splice(subtasksCurrent\n            .findIndex(y => y === x.current.props.id), 1);\n        }\n      }\n    }\n  }\n  addIncomplete(util.getList(window.selected));\n  if (type === 'migrate') {\n    const tomorrow = new Date(util.getList(window.selected).state.title);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    util.getList(window.selected).setState({\n      subtasks: subtasksCurrent\n    });\n    save(util.getList(window.selected));\n    display.searchDate(tomorrow.toDateString());\n    setTimeout(() => {\n      window.selected.setState(\n        { subtasks: window.selected.subtasksCurrent.concat(incompleteTasks) });\n      save(window.selected);\n    }, 500);\n  }\n}","import $ from 'jquery';\nimport * as edit from './edit';\nimport * as util from './util';\nimport * as server from './server';\nimport Task from '../components/Task/Task';\n\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks)\n    .find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n    if (taskEntry.info.type === 'event' &&\n      taskEntry.info.complete !== 'complete' &&\n      !taskEntry.info.startDate.includes('--')) {\n      if (\n        taskEntry.info.startDate[0] === now[0] &&\n        taskEntry.info.startDate[1] === now[1]\n      ) {\n        Notification.requestPermission();\n        new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n        if (\n          taskEntry.info.type === 'event' && \n          newDate.getHours() === now[0] &&\n          newDate.getMinutes() === now[1]\n        ) {\n          Notification.requestPermission();\n          new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\n\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\n\nexport function toggleMode() {\n  if (window.data.settings.mode === 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n  setTheme(window.data.settings.theme);\n  server.uploadSettings();\n}\n\nexport function toggleSounds() {\n  if (window.data.settings.sounds === 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\n\nexport function focus(set) {\n  var focusSet;\n  if (set !== undefined) {\n    focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused === 'focused') {\n      focusSet = '';\n    } else {\n      focusSet = 'focused';\n    }\n  }\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n    focusView.props.parent.changeIndex(focusView.props.parent.frames\n      .findIndex(x => x.current.props.id === focusView.props.id));\n  }\n  window.app.current.state.bank.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet)\n    }));\n  window.app.current.state.river.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet),\n    }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\n\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) { list.current.updateHeight(); }\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\n\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' +\n    window.data.settings.mode];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n  window.data.settings.theme = theme;\n  server.uploadSettings();\n  setTimeout(updateAllSizes, 100);\n}\n\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({displayTable: 'true'});\n  } else {\n    window.app.current.setState({displayTable: 'none'});\n  }\n}\n\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\n\nexport function processWidth(focused) {\n  var width;\n  if (focused !== 'focused') {\n    width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth',\n      ((window.innerWidth - 40) / width) + 'px');\n  } else {\n    // focus mode\n    width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n  return width;\n}\n\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\n\nexport function searchDate(text, type) {\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({ target: { value: text } });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\n\nexport function zoom() {\n  // zoom everything upwards\n  var zoomedSetting;\n  if (window.app.current.state.zoomed === 'zoomed') {\n    zoomedSetting = '';\n  } else {\n    zoomedSetting = 'zoomed';\n    if (!window.selected) { return }; // no zoomie\n  }\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({ zoomed: zoomedSetting });\n  window.app.current.setState({ zoomed: zoomedSetting });\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n  setTimeout(\n    updateAllSizes, 200\n  )\n}","import * as display from './display';\nimport * as edit from './edit';\nimport $ from 'jquery';\nimport Task from '../components/Task/Task';\nimport List from '../components/List/List';\n\nexport function keyComms(ev) {\n  if (!ev.ctrlKey) {\n    if (ev.key === 'Enter' && !window.preventReturn) {\n      ev.preventDefault();\n      if (ev.shiftKey) {\n        edit.newTask('task');\n      } else {\n        edit.newTask();\n      }\n      return;\n    } else if (ev.key === 'Escape' && !window.preventReturn) {\n      ev.preventDefault();\n      if (window.app.current.state.displayTable !== 'none') display.displayTable();\n      document.activeElement.blur();\n      if (window.selected) {\n        edit.save(window.selected, 'task');\n        if (window.selected instanceof Task &&\n          window.selected.state.displayOptions === 'show') {\n          window.selected.displayOptions('hide');\n        } else {\n          window.selected = undefined;\n        }\n      }\n      return;\n    }\n  }\n  if (ev.ctrlKey && ev.shiftKey) {\n    switch (ev.key) {\n      case 'V':\n        edit.pasteTask('task');\n        break;\n      case 'N':\n        edit.newTask('task');\n        break;\n      case 'F':\n        ev.preventDefault();\n        display.zoom();\n        break;\n      case 'C':\n        // mirror task\n        edit.copyTask(true);\n        break;\n      default:\n        break;\n    }\n  } else if (ev.ctrlKey) {\n    switch (ev.key) {\n      case 'x':\n        ev.preventDefault();\n        edit.cutTask();\n        break;\n      case 'c':\n        ev.preventDefault();\n        edit.copyTask();\n        break;\n      case 'v':\n        ev.preventDefault();\n        edit.pasteTask();\n        break;\n      case 'n':\n        ev.preventDefault();\n        edit.newTask();\n        break;\n      case ']':\n        ev.preventDefault();\n        edit.indentTask();\n        break;\n      case '[':\n        ev.preventDefault();\n        edit.indentTask(true);\n        break;\n      case 'f':\n        ev.preventDefault();\n        display.focus();\n        break;\n      case 'z':\n        ev.preventDefault();\n        edit.undo();\n        break;\n      case 'r':\n        ev.preventDefault();\n        display.updateAllSizes();\n        break;\n      case 'Backspace':\n        ev.preventDefault();\n        if (window.selected && window.selected instanceof Task) {\n          window.selected.deleteThis();\n        } else if (window.selected && window.selected instanceof List &&\n          window.selected.props.parent.props.id === 'bank') {\n          const confirm = window.confirm('delete this list?');\n          if (confirm) {\n            const subtasks = window.selected.props.parent.state.subtasks;\n            edit.saveUndo();\n            subtasks.splice(\n              subtasks.findIndex(x => x === window.selected.props.id), 1);\n            window.selected.props.parent.setState({ subtasks: subtasks });\n          }\n        }\n        break;\n      case 'w':\n        ev.preventDefault();\n        if (window.selected.props.parent.props.id !== 'river') {\n          edit.moveTask(-1);\n        }\n        break;\n      case 's':\n        ev.preventDefault();\n        if (window.selected.props.parent.props.id !== 'river') {\n          edit.moveTask(1);\n        }\n        break;\n      case 'a':\n        ev.preventDefault();\n        display.switchView(-1);\n        break;\n      case 'd':\n        ev.preventDefault();\n        display.switchView(1);\n        break;\n      case 'h':\n        ev.preventDefault();\n        window.app.current.toggleComplete();\n        break;\n      case 't':\n        ev.preventDefault();\n        if (window.app.current.state.zoomed === 'zoomed') return;\n        display.goToToday();\n        break;\n      case '1':\n        ev.preventDefault();\n        if (window.selected instanceof Task) {\n          window.selected.toggleComplete(false);\n        }\n        break;\n      case '2':\n        ev.preventDefault();\n        if (window.selected instanceof Task) {\n          window.selected.toggleImportant(false);\n        }\n        break;\n      case '3':\n        ev.preventDefault();\n        if (window.selected instanceof Task) {\n          window.selected.toggleMaybe(false);\n        }\n        break;\n      case 'i':\n        ev.preventDefault();\n        if (window.selected && window.selected instanceof Task) {\n          window.selected.displayOptions({ target: $('<p></p>') });\n          if (window.selected.state.displayOptions === 'hide') {\n            window.selected.editBar.current.focus();\n          }\n        };\n        break;\n      default:\n        break;\n    }\n  }\n}","import $ from 'jquery';\nimport * as util from './util';\nimport * as server from './server';\n\nexport function reset() {\n  var accept = window.confirm('Are you sure you want to reset all data?');\n  if (accept) {\n    server.initializeData();\n    setTimeout(function () { window.location.reload() }, 200);\n  }\n}\n\nexport function restore() {\n  window.preventReturn = true;\n  const textarea = $('<textarea class=\"restore\"></textarea>');\n  $('#root').append(textarea);\n  textarea.on('keydown', ev => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      try {\n        window.data = JSON.parse(textarea.val());\n      } catch (err) {\n        alert('invalid JSON syntax');\n        return;\n      }\n      server.testLargeData();\n      // server.uploadData();\n      // setTimeout(window.location.reload, 500);\n    } else if (ev.key === 'Escape') {\n      textarea.remove();\n      setTimeout(() => window.preventReturn = false, 100);\n    }\n  })\n}\n\nexport function backup() {\n  alert('open console to copy data (file download option will be added soon)');\n  util.consoleLog(JSON.stringify(window.data));\n}\n\nexport function clean() {\n  function removeDeadline(list, id) {\n    for (let x of Object.keys(list)) {\n      // switch it out of things\n      let deadlineList = list[x];\n      if (deadlineList.includes(id)) {\n        deadlineList =\n          deadlineList.splice(deadlineList.findIndex(x => x === id), 1);\n      }\n    }\n  }\n  // clean out tasks which aren't in lists\n  for (let id of Object.keys(window.data.tasks).filter(x =>\n    !['river', 'bank'].includes(x))) {\n    let found = false;\n    for (let containerId of Object.keys(window.data.tasks)) {\n      if (window.data.tasks[containerId].subtasks.map(x =>\n        util.stripR(x)).includes(id)) {\n        found = true;\n        break;\n      }\n    }\n    if (found === false) {\n      delete window.data.tasks[id];\n      removeDeadline(window.data.settings.deadlines, id);\n      removeDeadline(window.data.settings.startdates, id);\n    }\n  }\n\n  // clean out empty dates in the river view\n  const dates = window.data.tasks['river'].subtasks;\n  let i = dates.length - 1;\n  const today = new Date().toDateString();\n\n  while(window.data.tasks[dates[i]].subtasks.length === 0) {\n    i --;\n    const now = window.data.tasks[dates[i]].title;\n    if (i == 0 || now === today) break;\n  }\n  if (i < dates.length - 1) {\n    window.data.tasks['river'].subtasks = dates.slice(0, i + 1);\n  }\n}","export default __webpack_public_path__ + \"static/media/logo.220e1478.png\";","import './SignIn.css';\nimport '../App/App.css';\nimport * as server from '../../services/server';\nimport { useState } from 'react';\nimport Axios from 'axios';\nimport imgSource from '../../assets/media/logo.png';\n\n// props has init function\nexport default function SignIn (props) {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [password2, setPassword2] = useState('');\n  const [format, setFormat] = useState('login');\n\n  const reset = () => {\n    setPassword2('');\n    setPassword('');\n    setUsername('');\n  }\n\n  const login = () => {\n    if (format === 'create') {\n      if (password2 !== password) {\n        alert('passwords must match');\n        reset();\n        return;\n      } else if (username.length === 0) {\n        alert('enter a username');\n        return;\n      } else if (password.length === 0) {\n        alert('enter a password');\n        return;\n      }\n      Axios.post('/server/createuser', {\n        username: username,\n        password: password,\n      }).then((response) => {\n        console.log(response);\n        if (response.data === 'duplicate username') {\n          alert('username taken');\n          setUsername('');\n        } else {\n          // load data into window's data\n          window.username = username;\n          window.password = response.data.encryptedPassword;\n          // reset and upload fresh data\n          server.initializeData();\n          confirm();\n        }\n      }).catch((err) => {\n        console.log(err);\n      });\n    } else if (format === 'login') {\n      if (username.length === 0) {\n        alert('enter a username');\n        return;\n      } else if (password.length === 0) {\n        alert('enter a password');\n        return;\n      }\n      Axios.post('/server/login', {\n        username: username,\n        password: password,\n      }).then((response) => {\n        console.log(response);\n        if (response.data === 'wrong username') {\n          alert('username does not exist');\n          setUsername('');\n        } else if (response.data === 'wrong password') {\n          alert('incorrect password');\n          setPassword('');\n        } else {\n          // load data into window's data\n          window.data = {\n            settings: response.data.settings,\n            tasks: response.data.tasks\n          };\n          window.username = username;\n          window.password = response.data.encryptedPassword;\n          confirm();\n        }\n      }).catch((err) => {\n        console.log(err);\n      });\n    }\n  }\n\n  const confirm = () => {\n    props.init();\n  }\n\n  return (\n    <div className='signIn'>\n      <img \n        src={imgSource}\n        className='logo'\n      ></img>\n      <span className='title titleLarge'>\n        <span className='r'>River</span>\n        <span className='b'>Bank</span>\n      </span>\n      <p className='slogan'>go with the flow</p>\n      <div className='radioButtons'>\n        <button\n          className={`radioButton ${format === 'login' ? 'selected' : ''}`}\n          onClick={() => setFormat('login')}\n        >login</button>\n        <button\n          className={`radioButton ${format === 'create' ? 'selected' : ''}`}\n          onClick={() => setFormat('create')}\n        >create account</button>\n      </div>\n      <input \n        className='signInput'\n        placeholder='username'\n        value={username}\n        onChange={(ev) => {\n          setUsername(ev.target.value);\n        }}\n      ></input>\n      <input \n        type='password'\n        className='signInput'\n        placeholder='password'\n        value={password}\n        onChange={(ev) => {\n          setPassword(ev.target.value);\n        }}\n      ></input>\n      {format === 'create' &&\n      <input \n      type='password'\n      className='signInput'\n      placeholder='password again'\n      value={password2}\n      onChange={(ev) => {\n        setPassword2(ev.target.value);\n      }}\n    ></input>}\n      <button \n        className='loginButton'\n        onClick={login}\n      >enter</button>\n    </div>\n  )\n}","export default __webpack_public_path__ + \"static/media/pop.c3c0b051.mp3\";","export default __webpack_public_path__ + \"static/media/timer.77f48c79.mp3\";","export default __webpack_public_path__ + \"static/media/start.63a8d98e.mp3\";","import React from 'react';\nimport './StatusBar.css';\nimport timerSnd from '../../assets/snd/timer.mp3';\nimport startSnd from '../../assets/snd/start.mp3';\nimport * as display from '../../services/display';\nimport * as edit from '../../services/edit';\nimport * as util from '../../services/util';\nimport * as saving from '../../services/saving';\nimport $ from 'jquery';\n\nexport default class StatusBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchString: '', foundTasks: {} };\n  }\n  search(ev) {\n    if (this.state.searchString === '') {\n      this.searches = { ...window.data.tasks };\n    }\n    this.setState({ searchString: ev.target.value });\n    for (let x of Object.keys(this.searches)) {\n      if (!new RegExp(this.state.searchString, 'i').test(\n        this.searches[x].title) ||\n        this.searches[x].info.complete === 'complete') {\n        delete this.searches[x];\n      }\n    }\n    // id : {title, subtasks, info}\n    this.setState({ foundTasks: this.searches });\n  }\n  goToSearch(id) {\n    window.preventReturn = true;\n    window.preventSelect = true;\n    var idList = [id];\n    function buildParents(otherId) {\n      for (let x of Object.keys(window.data.tasks)) {\n        if (window.data.tasks[util.stripR(x)].subtasks.includes(otherId)) {\n          idList.splice(0, 0, x);\n          buildParents(x);\n          return;\n        }\n      }\n    }\n    buildParents(id);\n    const frame = window.app.current.state[idList[0]].current;\n    const listIndex = frame.state.subtasks.slice(frame.state.shownIndex)\n      .findIndex(x => x === idList[1]);\n    frame.changeIndex(frame.state.shownIndex + listIndex, true);\n    this.setState({ searchString: '', foundTasks: {} });\n    \n    setTimeout(() => {\n      const list = frame.frames[listIndex].current;\n      let foundTask = list;\n      let i = 2;\n      while (idList.length > i) {\n        // find in tasks starting at index 2 (if it's there)\n        let taskId = idList[i];\n        let taskIndex;\n        if (foundTask.subtasksCurrent &&\n          foundTask.subtasksCurrent.length > 0) {\n          taskIndex = foundTask.subtasksCurrent\n            .findIndex(x => x === taskId);\n        } else {\n          taskIndex = foundTask.state.subtasks\n            .findIndex(x => x === taskId);\n        }\n        foundTask = foundTask.taskList.current\n          .subtaskObjects[taskIndex].current;\n        i++;\n      }\n      window.preventSelect = false;\n      edit.selectTask(foundTask);\n      \n      // go through IDs and find the trace paths\n      setTimeout(() => {\n        window.preventReturn = false;\n      }, 100);\n    }, 100);\n  }\n  componentDidMount() {\n    setTimeout(display.goToToday, 200);\n  }\n  goToFirst() {\n    if ($(this.searchResults.current).children().length === 0) {\n      console.log('zero length', $($(this.searchResults.current)\n      .children()[0]).attr('value'));\n      this.setState({ searchString: '', foundTasks: {} });\n      return;\n    }\n    this.goToSearch($($(this.searchResults.current)\n      .children()[0]).attr('value'));\n  }\n  tutorial = () => {\n    this.setState({ tutorial: true });\n    const myFunc = (ev) => {\n      if (!$(ev.target).hasClass('tutorialShow')) {\n        this.setState({ tutorial: false });\n        $(window).off('click', myFunc);\n      }\n    }\n    setTimeout(() => {\n      $(window).on('click', myFunc)\n    }, 100);\n  }\n  render() {\n    this.search = this.search.bind(this);\n    this.goToSearch = this.goToSearch.bind(this);\n    this.goToFirst = this.goToFirst.bind(this);\n    this.searchResults = React.createRef();\n    this.searchBar = React.createRef();\n    this.options = React.createRef();\n    this.functions = React.createRef();\n    this.move = React.createRef();\n    this.upcoming = React.createRef();\n    let deadlineItems = Object.keys(this.props.deadlines).filter(\n      x => new Date(x).getTime() >= new Date().getTime()\n    )\n    deadlineItems = deadlineItems.map(x => (\n      this.props.deadlines[x].map(y => [x, y])\n    )).flat().filter(x => x.length > 0);\n    this.functionsDict = {\n      'newTask': edit.newTask,\n      'newSubtask': () => edit.newTask(\"task\"),\n      'cutTask': edit.cutTask,\n      'copyTask': edit.copyTask,\n      'copyTaskTrue': () => edit.copyTask(true),\n      'pasteTask': edit.pasteTask,\n      'pasteTaskTask': () => edit.pasteTask('task'),\n      'deleteTask': edit.deleteTask,\n      'moveTaskUp': () => edit.moveTask(-1),\n      'moveTaskDown': () => edit.moveTask(1),\n      'switchView': () => display.switchView(1),\n      'listEditMigrate': () => edit.listEdit('migrate'),\n      'listEditClear': () => edit.listEdit('clear'),\n      'displayTable': display.displayTable,\n      'focus': display.focus,\n      'zoom': display.zoom,\n      'undo': edit.undo,\n      'toggleComplete': () => window.app.current.toggleComplete(),\n      'backup': saving.backup,\n      'restore': saving.restore,\n      'reset': saving.reset,\n      'toggleSounds': display.toggleSounds,\n      'toggleMode': display.toggleMode,\n      'setThemeSpace': () => display.setTheme(\"space\"),\n      'setThemeSky': () => display.setTheme(\"sky\"),\n      'setThemeWater': () => display.setTheme(\"water\"),\n      'setThemeEarth': () => display.setTheme(\"earth\"),\n      'setThemeFire': () => display.setTheme(\"fire\"),\n      'indent': edit.indentTask,\n      'unindent': () => edit.indentTask(true),\n      'togglePast': () => {\n        if (window.app.current.state.river.current.state.shownIndex !== 0) {\n          window.app.current.state.river.current.setState({\n            shownIndex: 0\n          });\n        } else {\n          window.app.current.state.river.current.setState({\n            shownIndex: window.app.current.state.river.current.todayIndex()\n          });\n        }\n        display.goToToday();\n      } \n    }\n    return (\n      <>\n      <div className='statusBar'>\n        <span className='title'><span className='r'>River</span>\n          <span className='b'>Bank</span></span>\n        <div style={{\n          display: 'flex', flexDirection: 'column',\n          position: 'relative'\n        }}>\n          <input\n            ref={this.searchBar}\n            className='searchBar' onChange={(ev) => this.search(ev)}\n            value={this.state.searchString}\n            onKeyDown={(ev) => {\n              if (ev.key === 'Backspace') {\n                ev.preventDefault();\n                this.setState({ searchString: '', foundTasks: {} });\n              } else if (ev.key === 'Enter') {\n                ev.preventDefault();\n                if ($(this.searchResults.current).children().length > 0) {\n                  this.goToFirst();\n                }\n              }\n            }}\n            placeholder='search'></input>\n          {this.state.searchString.length > 0 &&\n            <select ref={this.searchResults}\n              style={{ width: '5em' }}\n              onChange={() => {\n                this.goToSearch(this.searchResults.current.value)\n              }}>\n              {Object.keys(this.state.foundTasks).map(x =>\n                <option key={x} value={x}>\n                  {this.state.foundTasks[x].title}\n                </option>)}\n            </select>\n          }\n        </div>\n        <Timer />\n        <div className='buttonBar nowrap'>\n          <select defaultValue='' ref={this.functions} style={{ width: '35px' }}\n            onChange={() => {\n              this.functionsDict[this.functions.current.value].call();\n              this.functions.current.value = '';\n            }}>\n            <option value=\"\" disabled hidden>edit</option>\n            <option value='newTask'>\n              new task (return)</option>\n            <option value='newSubtask'>\n              new subtask (shift-return)</option>\n            <option value='cutTask'>\n              cut (ctrl-x)</option>\n            <option value='copyTask'>\n              copy (ctrl-c)</option>\n            <option value='copyTaskTrue'>\n              mirror (ctrl-shift-C)</option>\n            <option value='pasteTask'>\n              paste (ctrl-v)</option>\n            <option value='pasteTaskTask'>\n              paste as subtask (ctrl-shift-V)</option>\n            <option value=\"deleteTask\">\n              delete (ctrl-delete)</option>\n          </select>\n          <select defaultValue='' ref={this.move} style={{ width: '45px' }}\n            onChange={() => {\n              this.functionsDict[this.move.current.value].call();\n              this.move.current.value = '';\n            }}>\n            <option value=\"\" disabled hidden>move</option>\n            <option value=\"moveTaskUp\">\n              move up (ctrl-w)</option>\n            <option value=\"moveTaskDown\">\n              move down (ctrl-s)</option>\n            <option value=\"indent\">\n              indent (ctrl-])</option>\n            <option value='unindent'>\n              unindent (ctrl-[)</option>\n            <option value=\"switchView\">\n              following week/lists (ctrl-d)</option>\n            <option value=\"switchView(-1)\">\n              previous week/lists (ctrl-a)</option>\n            <option value=\"listEditMigrate\">\n              migrate date</option>\n            <option value=\"listEditClear\">\n              clear list</option>\n            <option value=\"displayTable\">\n              display as table</option>\n            <option value=\"togglePast\">\n              show/hide past dates</option>\n          </select>\n          <select defaultValue='' ref={this.options} onChange={() => {\n            this.functionsDict[this.options.current.value].call();\n            this.options.current.value = '';\n          }}\n            style={{ width: '60px' }}>\n            <option value=\"\" disabled hidden>settings</option>\n            <option value='focus'>focus on list (ctrl-f)</option>\n            <option value='zoom'>focus on view (ctrl-shift-F)</option>\n            <option value='toggleComplete'>\n              show/hide complete (ctrl-h)</option>\n            <option value='undo'>undo (ctrl-z)</option>\n            <option value='backup'>backup</option>\n            <option value='restore'>restore</option>\n            <option value='reset'>reset</option>\n            <option value='toggleSounds'>toggle sounds</option>\n            <option value='toggleMode'>toggle day/night</option>\n            <option value='setThemeSpace'>theme: space</option>\n            <option value='setThemeSky'>theme: sky</option>\n            <option value='setThemeWater'>theme: water</option>\n            <option value='setThemeEarth'>theme: earth</option>\n            <option value='setThemeFire'>theme: fire</option>\n          </select>\n          <ListMenu />\n          <select defaultValue='' ref={this.upcoming} onChange={() => {\n            this.goToSearch(this.upcoming.current.value);\n            this.upcoming.current.value = '';\n          }} style={{width: '75px'}}>\n            <option value=\"\" disabled hidden>upcoming</option>\n            {deadlineItems.map(x => (\n              <option value={util.stripR(x[1])}>\n                {x[0].slice(0, x[0].length - 5)}: {\n                window.data.tasks[util.stripR(x[1])].title}\n              </option>\n            ))}\n          </select>\n        </div>\n        <span className='tutorialLink' onClick={this.tutorial}>help</span>\n      </div>\n      {this.state.tutorial && \n        <div className='tutorial tutorialShow'>\n          <iframe src='https://www.youtube.com/embed/AcfqM2exBu0'>\n          </iframe>\n        </div>\n      }\n      </>\n    )\n  }\n}\n\nclass ListMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { bankLists: props.bankLists, riverLists: props.riverLists };\n  }\n  goToList(type) {\n    if (type === 'river') {\n      display.searchDate(this.riverLister.current.value);\n    } else if (type === 'bank') {\n      var parent = window.app.current.state.bank.current;\n      var list = this.bankLister;\n      parent.changeIndex(Number(list.current.value), true);\n    }\n\n    if (type === 'river') {\n      this.riverLister.current.value = '';\n    } else if (type === 'bank') {\n      this.bankLister.current.value = '';\n    }\n  }\n  render() {\n    this.riverLister = React.createRef();\n    this.bankLister = React.createRef();\n    return (\n      <>\n        <select defaultValue='' ref={this.bankLister} onChange={() => this.goToList('bank')}\n          style={{ width: '35px' }}>\n          <option value=\"\" disabled hidden>lists</option>\n          {window.data.tasks['bank'].subtasks.filter(\n            x => window.data.tasks[x].title !== '--')\n            .map((x, index) =>\n              <option key={x} value={index}>{window.data.tasks[x].title}</option>)}\n        </select>\n        <select defaultValue='' ref={this.riverLister} onChange={() => {\n          if (this.riverLister.current.value === 'today') {\n            display.goToToday();\n            this.riverLister.current.value = '';\n          } else {\n            this.goToList('river')\n          }\n        }}\n          style={{ width: '45px' }}>\n          <option value=\"\" disabled hidden>dates</option>\n          <option value='today'>today (ctrl-t)</option>\n          {window.data.tasks['river'].subtasks.filter(x => new Date(\n            window.data.tasks[x].title).getTime() >=\n            new Date().getTime())\n            .map((x) =>\n              <option key={x} value={window.data.tasks[x].title}>\n                {window.data.tasks[x].title}</option>)}\n        </select>\n      </>\n    )\n  }\n}\n\nclass Timer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seconds: 0,\n      audio: new Audio(timerSnd),\n      start: new Audio(startSnd),\n      startTime: undefined,\n      ended: false,\n    };\n\n  }\n  startTimer(val) {\n    const endTime =\n      new Date(new Date().getTime() + val * 60 * 1000).getTime();\n    this.setState({ endTime: endTime, seconds: val * 60 });\n    display.playSound(this.state.start);\n    this.play();\n  }\n  play(stopwatch, backwards) {\n    Notification.requestPermission();\n    clearInterval(this.interval);\n    this.setState({ ended: false });\n    if (stopwatch === 'stopwatch') {\n      display.playSound(this.state.start);\n      this.interval = setInterval(() => {\n        this.setState({ seconds: this.state.seconds + 1 });\n      }, 1000);\n    } else {\n      this.interval = setInterval(() => {\n        this.setState({\n          seconds: Math.ceil((this.state.endTime -\n            new Date().getTime()) / 1000)\n        });\n        if (this.state.seconds <= 0 && this.state.ended === false) {\n          this.end();\n        }\n      }, 1000);\n    }\n  }\n  end() {\n    this.setState({ play: true, ended: true });\n    display.playSound(this.state.audio);\n    this.options.current.value = '';\n    new Notification('timer complete');\n  }\n  playPause() {\n    clearInterval(this.interval);\n    this.setState({ seconds: 0 });\n    this.options.current.value = '';\n  }\n  render() {\n    this.startTimer = this.startTimer.bind(this);\n    this.playPause = this.playPause.bind(this);\n    this.play = this.play.bind(this);\n    this.audioRef = React.createRef();\n    this.options = React.createRef();\n    var timeReadout;\n    if (this.state.seconds >= 0) {\n      timeReadout = Math.floor(this.state.seconds / 60) + ':' +\n        String(this.state.seconds -\n          (Math.floor(this.state.seconds / 60) * 60))\n          .padStart(2, '0')\n    } else {\n      if ((this.state.seconds / 60) === Math.floor(this.state.seconds / 60)\n        && this.state.seconds !== 0) {\n        // right on minute\n        timeReadout = '-' +\n          (-1 * (Math.floor(this.state.seconds / 60))) + ':00'\n      } else {\n        timeReadout = '-' +\n          (-1 * (Math.floor(this.state.seconds / 60) + 1)) + ':' +\n          String(60 - (this.state.seconds -\n            (Math.floor(this.state.seconds / 60) * 60)))\n            .padStart(2, '0')\n      }\n    }\n    return (\n      <>\n        <input className='timerBar' readOnly={true}\n          value={timeReadout}></input>\n        <select value='' ref={this.options} onChange={() => {\n          if (this.options.current.value === 'clear') {\n            this.playPause();\n            this.options.current.value = '';\n          } else if (this.options.current.value === 'stopwatch') {\n            this.setState({ seconds: 0 });\n            this.play('stopwatch');\n            this.options.current.value = '';\n          } else {\n            this.startTimer(this.options.current.value);\n            this.options.current.value = '';\n          }\n        }}\n          style={{ width: '45px' }}>\n          <option value=\"\" disabled hidden>timer</option>\n          <option value={'clear'}>--:--</option>\n          <option value={50}>50:00</option>\n          <option value={25}>25:00</option>\n          <option value={15}>15:00</option>\n          <option value={10}>10:00</option>\n          <option value={5}>5:00</option>\n          <option value={'stopwatch'} title='stopwatch'>&infin;</option>\n        </select>\n      </>\n    )\n  }\n}","import React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit';\nimport * as display from '../../services/display';\nimport * as util from '../../services/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List';\n\n// main app, governs everything\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: React.createRef(),\n      river: React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none',\n    };\n  }\n\n  // hide/show completes\n  toggleComplete() {\n    var hideComplete;\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n    this.setState({ hideComplete: hideComplete });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n\n    this.statusBar = React.createRef();\n    return (\n      <>\n        <StatusBar parent={this} ref={this.statusBar} \n          deadlines={this.state.deadlines} \n          startdates={this.state.startdates} />\n        <div className={'container ' + this.state.hideComplete + ' ' +\n          this.state.zoomed + ' ' + this.state.disableSelect}>\n          <Frame id='bank' info={{\n            ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          }}\n            subtasks={window.data.tasks['bank'].subtasks} ref={this.state.bank} />\n          <Frame id='river' info={{\n            ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused,\n          }}\n            deadlines={this.state.deadlines}\n            startdates={this.state.startdates}\n            subtasks={window.data.tasks['river'].subtasks} ref={this.state.river} />\n        </div>\n        <SelectMenu ref={this.state.contextMenu}/>\n        {window.selected && this.state.displayTable !== 'none' &&\n          <TableDisplay />}\n      </>\n    )\n  }\n}\n\n// extra function menu tacked on after the drag/drop context\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { display: 'none', top: '0', left: '0' };\n  }\n  render() {\n    this.self = React.createRef();\n    return (\n      <div className='selectMenu' ref={this.self} style={{ display: this.state.display,\n        top: this.state.top, left: this.state.left }}>\n        <p className='centerAlign'><b>edit</b></p>\n        <p onClick={() => edit.newTask()}>\n          new task<span className='rightAlign'>(return)</span></p>\n        <p onClick={() => edit.newTask('task')}>\n          new subtask <span className='rightAlign'>(shift-return)</span></p>\n        <p onClick={() => edit.cutTask()}>\n          cut <span className='rightAlign'>(ctrl-x)</span></p>\n        <p onClick={() => edit.copyTask()}>\n          copy <span className='rightAlign'>(ctrl-c)</span></p>\n        <p onClick={() => edit.copyTask(true)}>\n          mirror <span className='rightAlign'>(ctrl-shift-C)</span></p>\n        <p onClick={() => edit.pasteTask()}>\n          paste <span className='rightAlign'>(ctrl-v)</span></p>\n        <p onClick={() => edit.pasteTask(\"task\")}>\n          paste as subtask (ctrl-shift-V)</p>\n        <p onClick={() => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List &&\n            window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              edit.saveUndo();\n              subtasks.splice(\n                subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({ subtasks: subtasks });\n            }\n          }\n        }}>\n          delete <span className='rightAlign'>(ctrl-delete)</span></p>\n        <p  className='centerAlign' style={{marginTop:'5px'}}><b>move</b></p>\n        <p onClick={() => edit.moveTask(1)}>\n          move down <span className='rightAlign'>(ctrl-s)</span></p>\n        <p onClick={() => edit.moveTask(-1)}>\n          move up <span className='rightAlign'>(ctrl-w)</span></p>\n        <p onClick={() => display.switchView(1)}>\n          following week/lists <span className='rightAlign'>(ctrl-d)</span></p>\n        <p onClick={() => display.switchView(-1)}>\n          previous week/lists <span className='rightAlign'>(ctrl-a)</span></p>\n        <p onClick={() => edit.listEdit('migrate')}>\n          migrate date</p>\n        <p onClick={() => edit.listEdit('clear')}>\n          clear list</p>\n        <p onClick={() => display.displayTable()}>\n          display as table</p>\n      </div>\n    )\n  } \n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return (\n      <table className='table'>\n        <thead></thead>\n        <tbody>\n          {window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => (\n            <tr key={x}>\n              <td>{\n                window.data.tasks[util.stripR(x)].title\n              }</td>\n              {window.data.tasks[x].subtasks.map(y => (\n                <td key={y}>\n                  {window.data.tasks[util.stripR(y)].title\n                  }\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport $ from 'jquery';\nimport * as display from './services/display';\nimport * as keyComms from './services/keyComms';\nimport * as saving from './services/saving';\nimport * as util from './services/util';\nimport * as edit from './services/edit';\nimport SignIn from './components/SignIn/SignIn';\nimport App from './components/App/App.js';\nimport './style.css';\n\nwindow.themes = {\n  'earth-day': {\n    \"--font\": \"var(--fontSize) 'Quicksand', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--bold\": \"400\",\n    \"--background\": \"rgb(218, 221, 216)\",\n    \"--border\": \"rgba(60, 52, 31, 0.3)\",\n    \"--select\": \"rgb(85, 107, 47)\",\n    \"--event\": \"rgba(85, 107, 47, 0.3)\",\n    \"--foreground\": \"rgb(59, 60, 54)\",\n    \"--midground\": \"rgba(59, 60, 54, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(85, 107, 47, 0.5)\",\n    \"--important\": \"rgba(59, 60, 54, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(14, 41, 48, 0.8)\",\n    \"--endDate\": \"rgb(14, 41, 48)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(59, 60, 54, 0.1)\",\n    \"--river\": \"rgba(85, 107, 47, 0.1)\",\n  },\n  'earth-night': {\n    \"--font\": \"var(--fontSize) 'Quicksand', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--bold\": \"400\",\n    \"--background\": \"rgb(35, 38, 33)\",\n    \"--border\": \"rgba(224, 223, 225, 0.3)\",\n    \"--select\": \"rgb(186, 208, 149)\",\n    \"--event\": \"rgba(186, 208, 149, 0.3)\",\n    \"--foreground\": \"rgb(218, 222, 200)\",\n    \"--midground\": \"rgba(59, 60, 54, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(186, 208, 149, 0.5)\",\n    \"--important\": \"rgba(218, 222, 200, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(85, 107, 47, 0.8)\",\n    \"--endDate\": \"rgb(85, 107, 47)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(218, 222, 200, 0.1)\",\n    \"--river\": \"rgba(186, 208, 149, 0.1)\",\n  },\n  'fire-day': {\n    \"--font\": \"var(--fontSize) 'Josefin Sans', Cochin, sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"rgb(230, 230, 250)\",\n    \"--border\": \"rgba(53, 3, 58, 0.3)\",\n    \"--select\": \"rgb(242, 172, 229)\",\n    \"--event\": \"rgba(251, 217, 253, 0.3)\",\n    \"--foreground\": \"rgb(53, 3, 58)\",\n    \"--midground\": \"rgba(200, 200, 230, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(242, 172, 229, 0.5)\",\n    \"--important\": \"rgba(53, 3, 58, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(226, 156, 210, 0.8)\",\n    \"--endDate\": \"rgb(226, 156, 210)\",\n    \"--headingSize\": \"120%\",\n    \"--lineSpacing\": \"10px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(53, 3, 58, 0.1)\",\n    \"--river\": \"rgba(242, 172, 229, 0.1)\",\n  },\n  'fire-night': {\n    \"--font\": \"var(--fontSize) 'Josefin Sans', Cochin, sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"rgb(5, 5, 26)\",\n    \"--border\": \"rgba(212, 112, 162, 0.3)\",\n    \"--select\": \"rgb(183, 104, 162)\",\n    \"--event\": \"rgba(183, 104, 162, 0.3)\",\n    \"--foreground\": \"rgb(248, 197, 252)\",\n    \"--midground\": \"rgba(40, 6, 34, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(183, 104, 162, 0.5)\",\n    \"--important\": \"rgba(248, 197, 252, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(226, 156, 210, 0.8)\",\n    \"--endDate\": \"rgb(226, 156, 210)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"10px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(248, 197, 252, 0.1)\",\n    \"--river\": \"rgba(183, 104, 162, 0.1)\",\n  },\n  'sky-day': {\n    \"--font\": \"var(--fontSize) 'Pilo Thin', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"#E4EDF1\",\n    \"--border\": \"rgba(21, 35, 40, 0.3)\",\n    \"--select\": \"rgb(119, 152, 171)\",\n    \"--event\": \"rgba(119, 152, 171, 0.3)\",\n    \"--foreground\": \"rgb(52, 64, 85)\",\n    \"--midground\": \"rgba(128, 128, 128, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(119, 152, 171, 0.5)\",\n    \"--important\": \"rgba(52, 64, 85, 0.2)\",\n    \"--maybe\": \"rgba(29, 41, 81, 0.5)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(29, 41, 81, 0.8)\",\n    \"--endDate\": \"rgb(29, 41, 81)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"3em\",\n    \"--bank\": \"rgba(52, 64, 85, 0.1)\",\n    \"--river\": \"rgba(119, 152, 171, 0.1)\",\n  },\n  'sky-night': {\n    \"--font\": \"var(--fontSize) 'Pilo Thin', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"rgb(14, 23, 27)\",\n    \"--border\": \"rgba(36, 40, 43, 0.3)\",\n    \"--select\": \"rgb(83, 117, 136)\",\n    \"--event\": \"rgba(59, 75, 84, 0.3)\",\n    \"--foreground\": \"rgb(170, 182, 203)\",\n    \"--midground\": \"rgba(128, 128, 128, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(83, 117, 136, 0.5)\",\n    \"--important\": \"rgba(170, 182, 203, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(173, 185, 225, 0.8)\",\n    \"--endDate\": \"rgb(173, 185, 225)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"3em\",\n    \"--bank\": \"rgba(170, 182, 203, 0.1)\",\n    \"--river\": \"rgba(83, 117, 136, 0.1)\",\n  },\n  'space-day': {\n    \"--font\": \"var(--fontSize) 'Adam', Cochin, sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--background\": \"rgb(201, 192, 187)\",\n    \"--border\": \"rgba(128, 128, 128, 0.3)\",\n    \"--select\": \"rgb(165, 113, 100)\",\n    \"--event\": \"rgba(165, 113, 100, 0.3)\",\n    \"--foreground\": \"rgba(59, 47, 47)\",\n    \"--midground\": \"rgba(165, 113, 100, 0.5)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(165, 113, 100, 0.5)\",\n    \"--important\": \"rgba(59, 47, 47, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(161, 122, 116, 0.8)\",\n    \"--endDate\": \"rgb(161, 122, 116)\",\n    \"--bold\": \"400\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(59, 47, 47, 0.1)\",\n    \"--river\": \"rgba(165, 113, 100, 0.1)\",\n  },\n  'space-night': {\n    \"--font\": \"var(--fontSize) 'Adam', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--background\": \"rgb(0, 0, 0)\",\n    \"--border\": \"rgb(128, 128, 128, 0.3)\",\n    \"--select\": \"rgb(101, 138, 149)\",\n    \"--event\": \"rgba(101, 138, 149, 0.3)\",\n    \"--foreground\": \"rgb(191, 193, 194)\",\n    \"--midground\": \"rgba(101, 138, 149, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(101, 138, 149, 0.5)\",\n    \"--important\": \"rgba(191, 193, 194, 0.2)\",\n    \"--maybe\": \"darkblue\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(135,206,235, 0.8)\",\n    \"--endDate\": \"rgb(135,206,235)\",\n    \"--bold\": \"400\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(191, 193, 194, 0.1)\",\n    \"--river\": \"rgba(101, 138, 149, 0.1)\",\n  },\n  'water-day': {\n    \"--font\": \"var(--fontSize) 'Kirvy', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--background\": \"rgb(188, 212, 230)\",\n    \"--border\": \"rgba(36, 40, 43, 0.3)\",\n    \"--select\": \"rgb(64, 71, 77)\",\n    \"--event\": \"rgba(64, 71, 77, 0.3)\",\n    \"--foreground\": \"rgb(10, 10, 10)\",\n    \"--midground\": \"rgba(64, 71, 77, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(64, 71, 77, 0.5)\",\n    \"--important\": \"rgba(10, 10, 10, 0.2)\",\n    \"--maybe\": \"rgba(41, 74, 112, 0.5)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgb(41, 74, 112, 0.8)\",\n    \"--endDate\": \"rgb(41, 74, 112)\",\n    \"--bold\": \"300\",\n    \"--headingSize\": \"1.15em\",\n    \"--lineSpacing\": \"7px\",\n    \"--frontWidth\": \"3.5em\",\n    \"--bank\": \"rgba(10, 10, 10, 0.1)\",\n    \"--river\": \"rgba(64, 71, 77, 0.1)\",\n  },\n  'water-night': {\n    \"--font\": \"var(--fontSize) 'Kirvy', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--background\": \"rgb(31, 40, 52)\",\n    \"--border\": \"rgba(176, 194, 212, 0.3)\",\n    \"--select\": \"rgb(145, 163, 176)\",\n    \"--event\": \"rgba(145, 163, 176, 0.3)\",\n    \"--foreground\": \"whitesmoke\",\n    \"--midground\": \"rgba(145, 163, 176, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(145, 163, 176, 0.5)\",\n    \"--important\": \"rgba(245, 245, 245, 0.1)\",\n    \"--maybe\": \"rgba(143, 176, 214, 0.5)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(143, 176, 214, 0.8)\",\n    \"--endDate\": \"rgb(143, 176, 214)\",\n    \"--bold\": \"300\",\n    \"--headingSize\": \"1.15em\",\n    \"--lineSpacing\": \"7px\",\n    \"--frontWidth\": \"3.5em\",\n    \"--bank\": \"rgba(245, 245, 245, 0.1)\",\n    \"--river\": \"rgba(145, 163, 176, 0.1)\",\n  }\n}\n\nfunction load() {\n  const newTheme = window.themes['space-night'];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n  ReactDOM.render(\n    <SignIn init={init} />, \n    document.getElementById('root')\n  );\n}\n\nfunction init() {\n  const newTheme = window.themes['space-night'];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n\n  window.selected = undefined;\n  window.preventSelect = undefined;\n  window.copiedTask = undefined;\n  window.app = undefined;\n  window.preventReturn = undefined;\n  edit.saveUndo();\n\n  saving.clean();\n\n  window.selected = undefined;\n  window.width = Math.floor(window.innerWidth / 200);\n  window.prevWidth = Math.floor(window.innerWidth / 200);\n  window.app = React.createRef();\n  ReactDOM.render(<App ref={window.app} />, document.getElementById('root'));\n  $(document).on('keydown', keyComms.keyComms);\n  display.focus(window.data.settings.focused);\n  display.setTheme(window.data.settings.theme);\n  window.addEventListener('resize', () => {\n    if (window.innerWidth / 10 !== Math.floor(window.innerWidth / 10)) return;\n    display.updateAllSizes();\n  });\n  display.checkTimes();\n  window.setInterval(display.checkTimes, 60000);\n  window.addEventListener('contextmenu', (ev) => {\n    ev.preventDefault();\n    if (window.getSelection) {\n      if (window.getSelection().empty) {  // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) {  // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    }\n    const contextMenu = window.app.current.state.contextMenu.current.self.current;\n    window.app.current.state.contextMenu.current.setState({ \n      top: Math.min(ev.pageY, \n        window.innerHeight - $(contextMenu).height()), \n      left: Math.min(ev.pageX, \n        window.innerWidth - $(contextMenu).width()),\n      display: 'block' });\n  })\n  window.addEventListener('click', () => \n    window.app.current.state.contextMenu.current.setState({ display: 'none' }))\n  document.addEventListener('fullscreenchange', display.updateAllSizes);\n}\n\nconst migrate = () => {\n  // MIGRATION PROTOCOLS\n\n  if (!window.data.settings.migrated) {\n    window.data.settings.migrated = [];\n  }\n\n  if (!window.data.settings.migrated.includes('12/1')) {\n    window.data.settings.migrated.push('12/1');\n    var tasksMigrated = {};\n    var newData = JSON.parse(JSON.stringify(window.data));\n    function treeSearch(task) {\n      tasksMigrated[task.id] = {\n        info: task.info, title: task.title,\n        subtasks: task.subtasks.map(x => x.id)\n      };\n      for (let subtask of task.subtasks) {\n        treeSearch(subtask, task);\n      }\n      delete task.subtasks;\n    }\n    newData.river.id = 'river';\n    newData.bank.id = 'bank';\n    treeSearch(newData.river);\n    treeSearch(newData.bank);\n    delete newData.river;\n    delete newData.bank;\n    newData.tasks = tasksMigrated;\n    window.data = newData;\n  }\n\n  if (!window.data.settings.migrated.includes('12/2')) {\n    window.data.settings.migrated.push('12/2');\n    for (let task of Object.keys(window.data.tasks)) {\n      const foundTask = window.data.tasks[util.stripR(task)];\n      delete foundTask.info.startDate;\n      delete foundTask.info.endDate;\n    }\n  }\n\n  if (!window.data.settings.migrated.includes('12/3')) {\n    window.data.settings.migrated.push('12/3');\n    window.data.settings.startdates = {};\n    window.data.settings.deadlines = {};\n  }\n\n  if (!window.data.settings.migrated.includes('12/24')) {\n    window.data.settings.migrated.push('12/24');\n    window.data.settings.sounds = 'true';\n  }\n}\n\nload();"],"sourceRoot":""}